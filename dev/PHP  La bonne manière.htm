<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8"/>
        <title>PHP: La bonne manière</title>
        <meta name="description" content="Une référence rapide à lire pour apprendre les meilleurs pratiques PHP, les conventions d'écritures et les liens sur les tutoriaux faisant autorité sur le web"/>
        <meta name="robots" content="index,follow,archive"/>
        <meta property="og:image:url" content="http://www.phptherightway.com/images/og-image.png"/>
        <meta property="og:image:width" content="1024"/>
        <meta property="og:image:height" content="640"/>
        <meta property="og:title" content="PHP: La bonne manière"/>
        <meta property="og:description" content="PHP: La bonne manière est une référence, concise, facile à lire, à propos des conventions d'écriture les plus connues du PHP, des liens sur les tutoriaux faisant autorité sur le web"/>
        <meta property="og:url" content="http://eilgin.github.io/php-the-right-way"/>
        <meta property="og:site_name" content="PHP: La bonne manière"/>
        <meta property="og:type" content="website"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
        <link rel="icon" href="/php-the-right-way/images/favicon.png" type="image/png"/>
        <link rel="stylesheet" href="/php-the-right-waystyles/syntax.css">
        <style>
        *{box-sizing:border-box}body{font-size:24px;line-height:32px;text-rendering:optimizeLegibility}h1,h2,h3,h4{font-family:georgia,serif}h1,.alpha{position:relative;font-size:48px;font-weight:normal;line-height:50px;text-align:center}h2,.beta{font-size:32px;font-weight:normal;line-height:36px}h3,.gamma{font-size:24px;font-weight:bold;line-height:30px}blockquote{border-left:3px solid #ccc;padding-left:20px;color:#777;font-style:italic;word-wrap:break-word}a{color:#4f5b93}a:hover{color:#8892bf}.back-to-top{text-align:center}.back-to-top a{background:#4f5b93;border-radius:3px;display:inline-block;height:40px;padding:0 20px;transition:all .1s ease;color:white;font-family:verdana,sans-serif;font-size:13px;line-height:40px;text-decoration:none;text-transform:uppercase}.back-to-top a:hover{background:#8892bf}img{max-width:100%}pre,code{color:#444;font-family:"Source Code Pro",Consolas,"Andale Mono WT","Andale Mono","Lucida Console","Lucida Sans Typewriter","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L",Monaco,"Courier New",Courier,monospace;font-size:90%}a pre,a code{color:inherit}pre{background:#f7f7f7;border:1px solid #eee;border-radius:3px;display:block;overflow:auto;padding:20px;width:100%}@media (max-width:767px){body{font-size:18px;line-height:24px}h1,.alpha{font-size:36px;line-height:38px}h2,.beta{font-size:24px;line-height:28px}h3,.gamma{font-size:18px;line-height:23px}blockquote{margin-left:0}ul,ol{padding-left:1em}pre{padding:5px 10px}}@media (max-width:360px){body{font-size:16px;line-height:21px}h1,.alpha{font-size:28px;line-height:30px}h2,.beta{font-size:20px;line-height:23px}h3,.gamma{font-size:16px;line-height:20px}}.site-header{padding-top:40px;margin-bottom:40px;text-align:center}.site-header h1{margin:0;font-size:72px;line-height:60px}.site-header h1 em{display:block;font-size:34px;font-style:normal}.site-header h1 a{color:#333;text-decoration:none}.site-header h1 a:hover{color:#8892bf}.site-header .build-date{margin-bottom:10px;color:#999;font-family:verdana,sans-serif;font-size:11px;text-transform:uppercase}.site-header .btn-share{background:#8892bf;border-radius:3px;display:inline-block;height:30px;padding:0 20px;vertical-align:baseline;color:white;font-family:verdana,sans-serif;font-size:12px;line-height:30px;text-decoration:none;text-transform:uppercase}.site-header .fork-me{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJUAAACVCAMAAABmfEh9AAAAMFBMVEXr6+wSFiH////U1NT09PSRk5hucHb5+flMT1f8/Py+v8EtMDpXWWE8P0hgY2rg4OD5mIG8AAAFoElEQVR4AbSb0W4sKQxEyxfMdAyG///b1bCt3MSZ1CKth4coj0fVVp0GevDnc318POqj9cvlv1efl9taC6j18fj4+JO7AlWtrY9LDtblboVg5VKh9XkdpTUIVjIVsJqcPUSSVi7VowJ4pjWOHuKViUWodljlcOR9XN1KCVhpVOERPrHGOBz5gJVJFcN6Yp2NfHiIiVQxrI0l1xFWXlqE6vMZltOCGCGtbKqIdVgQI6SVRMXS6m9teUJFsI6dGNLKpgpYMg5Hvoe0cqhCPzz4yGemRagSRj6klUsV0zp2Ykgrg+r/j7zPK6SVSxXTmr/Lp2miEwMVTYs5cQKa5URCFdPiI9+AAg0FEdJKpootP14l1cTQ8p0YqXhaEcpEuvbvqg5ppVPF2RrfoSoKNMeJnIr31vDvM9XE4Ektz6m4E/3zaTn2PE1pLdmJnIo78aa5FuryKJ8R08qm4k70hTaXSsSKs5VNxZ24a6GsN+x8OBV34jIRhYpHJ8aWT6WKacXXwFKGYokv28l9gYstn00V0/IvWL4A8/1XxKD8aCSTird8G3vk1bpVFeFOzKTiTtxQEpLaKzoxmYqPfMG8oXps+ejEZKqANfu4PhF8Q1UsLOdOTKfiThSDVW3TU5zIqc5bXh+q6In7RE5F0vIvI9+bmEUi7sQ8KpJWh95TluFETnXuxG5+14RmOJFTnRdEv6FQWsZpIKc6d+INpYYZsKITk6m4E0W8YEqrZZ6nlURFnNgXpvhaBRqxRkgrnYqcnbYmvjAES4Q7MZkqphWceD3jumrIijgxj4qcQTTsuLy3IdyJqVQxrYjl9wYDsAMnplLFtOLID0AHDvaJyVSk5duUAisN7acTQ1r5VMSJAu2G1eUFVkgrnYq8NK/SxebBDVk+FXHiRPGzG7J8KuLEoXc07YpYwYnZVAc3ZApUPbghS6EiTgxQNhR+cEOWTMVuyC5Yl4kmMcL4dppPRZzY6i76rhi85fOpyA1Zg46FpoBFKYaWz6cip4EK1KbV2kKPaY2QVjYVaXlvXauJtHodODGXijhRGqyLFHSJKzoxn4rtqkVkHyHF5cGJyVQxrXhd0A2fTa+DOzFSJaYVjkZ03VAGANq5EyNVXlrhq5F2Q6HoMH5DFqmS0/IfTrRqz5isMCfmU3EnNvyLMyd1Yj4Vc6Ksv5WlSpyYT8X2ibC//xbixHwq4kSpRaQXF3Fpkzoxn4o4cZkCTSZUuBPzqUjL68KGWq6m3In5VMSJNqVhecMWkDpxYjYV2fn4TkqswrooCndipMpMa351omN5N+hU0ScfcWI6FTmxmS62rXhDOXFiOhVp+WvZhsK+ZVn+qxPzqchm31FcFGvtAVv+uxPzqUha0/bj87UsjFb4aiSfijqx7Ygc4Ddk+VTciebPP4CJk31iPhV34iara+5p/7Xl86m4E3dSu7mM/LogUr3fid3Wbq4u+55T24u03kZFnOjSlu3jNxGF/fx1wduo+FcjBbK9+ITq8tOJ76LiX1Jabe2GelUQ76QiTuyGuqFg80VBvJeKONE21KsTm+G9vJWKOFE21OeJTTgaeTMVSasBl0jI6nYip8qfrW9O1AY0+bneTMW/GrEKqLxYPZ+KpBWPRmb7p307SEEoBoIoqBAlIOj9byt/9rUT3yaeoGhhGkmL/2VY9ZdOvBcqdGKtQifWKnRircILWa3CaiRX+cr3KndiqvIvn1TlJWWqcidaVV/5QIUl5baqTytXuROtKjqxVqETaxU6sVahE1uVNzaxCp0Yqny33jtVeUmZqnzlU5WvfKpyWqnKaaUqr0ZSlVcjqcqrkVqFTsxVeCFrVE7rM51oVZTWsLZVRVrjur5Eq4K0xnXtcaEKWbf1fEFVsca1HlBFrHEtvKWGrIFBlbHGheVA6ZoPVK2rV/18dX9UR3VUR3VUX8Uz94M6xyeLAAAAAElFTkSuQmCC);background-position:top right;background-repeat:no-repeat;background-size:contain;height:100px;width:100px;position:absolute;top:0;right:0;z-index:100;width:120px}.site-navigation,.site-content,.site-footer{margin:0 auto;max-width:840px;width:92%}.site-navigation{-webkit-columns:3;-moz-columns:3;columns:3;-webkit-column-gap:40px;-moz-column-gap:40px;column-gap:40px}.site-navigation input[type="checkbox"],.site-navigation label{display:none}.site-navigation ul{list-style:none;margin:0;padding:0}.site-navigation ul li{margin-bottom:20px;font-size:22px;line-height:23px}.site-navigation ul li a{display:block;color:#444;font-weight:700;text-decoration:none}.site-navigation ul li a:hover{color:#8892bf}.site-navigation ul li ul{padding-top:8px}.site-navigation ul li li{margin-bottom:6px;font-size:18px}.site-navigation ul li li a{border:none;color:#777;font-weight:normal}.site-navigation li{-webkit-column-break-inside:avoid;page-break-inside:avoid;break-inside:avoid}@media (max-width:820px){.site-navigation{-webkit-columns:2;-moz-columns:2;columns:2}}@media (max-width:560px){.site-navigation{-webkit-columns:1;-moz-columns:1;columns:1}}@media (max-width:375px){.site-navigation{background:rgba(255,255,255,0.95);-webkit-columns:1;-moz-columns:1;columns:1;max-height:100vh;position:fixed;bottom:0;left:0;z-index:100}.site-navigation label{background:#4f5b93;box-sizing:border-box;display:block;height:40px;padding:0 10px;width:100vh;position:absolute;bottom:0;left:0;color:white;font-family:verdana,sans-serif;font-size:13px;line-height:40px;text-transform:uppercase;z-index:2}.site-navigation>ul{background:rgba(255,255,255,0.96);border-top:3px solid #8892bf;box-shadow:rgba(0,0,0,0.25) 0 -5px 10px;box-sizing:border-box;padding:20px;overflow:auto;-webkit-overflow-scrolling:touch;position:absolute;left:0;bottom:40px;height:50vh;width:100vh;-webkit-transform:translate(0, 100vh);-ms-transform:translate(0, 100vh);transform:translate(0, 100vh);transition:all .2s ease;z-index:1}.site-navigation input[type="checkbox"]:checked~ul{-webkit-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}}.site-content h1{padding-top:40px;position:relative}.site-content h1:after{border:1px solid #ddd;border-bottom:none;content:"";display:block;height:8px;position:absolute;left:0;top:0;width:100%}.site-content.chapters{counter-reset:chapter}.site-content.chapters h1{counter-increment:chapter;padding-top:60px}.site-content.chapters h1:before{display:inline-block;content:"Chapter " counter(chapter) ".";position:absolute;top:30px;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);color:#999;font-size:12px;letter-spacing:1px;line-height:20px;text-transform:uppercase;text-align:center}.site-content #welcome ul{-webkit-columns:3;-moz-columns:3;columns:3;-webkit-column-gap:30px;-moz-column-gap:30px;column-gap:30px;list-style-position:inside}.site-content .back-to-top{margin-bottom:60px}@media (max-width:870px){.site-content #welcome ul{-webkit-columns:2;-moz-columns:2;columns:2}}@media (max-width:600px){.site-content #welcome ul{-webkit-columns:1;-moz-columns:1;columns:1}}.site-footer{border-top:1px solid #ccc;margin:60px auto 0 auto;padding:40px 20px;font-family:verdana,sans-serif;font-size:16px;text-align:center}.site-footer .cc-badge{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAMAAABUFvrSAAAAw1BMVEX///8AAAAAAACrsar///8oKSjR1NAODg4jHyDLz8pAPz/f399wcHBQUFBgYGDJzcjEyMN5fHkwMDC9wry4vbeAgIDw8PDBxcDO0c3M0MyUmJPGysW6v7q/v7+fn5/T1tKvtK61urSxt7C/w76zuLKhpKDk5OSRk5F2c3RQUVAbGxuts6yEhoR9fnxDREMgICDW1dXJyMirq6qvr68wLS3Pz8+Rj4+Pj4+LioqEgYJaV1i6ubmbl5meoJ1dXl06NjcZGRmWw6QEAAAAAnRSTlMMANomgjQAAAMCSURBVHjatZYJc6JAEIWznWFmOAQDguAdjUqMd0yi5vz/v2q7GTmkNusWW3kxNfJkPts3TMPVFfyIfiH3ttHwRs1623F0PYp03XHa9ebI6zRu74aDwcPDdQUBXCG3440Qq4ec91GchzqhM/J1FSEYuVguYudLASixnBM6JVPJNxqgtJts2mWHwMh1Ij6dQabZlEeKfDccDlo4xbAsA6e11KzLDoG9EXHvqVbb73Z9m+q+r4dEppLHAmomQ5k1EMmsi44CY74JV/gBU+ohWqtjzSMMY6iBjR4AfQAaTVLO87HkTDabiXIUuNnWieuaLFPgYs1cb1PJC6itUzCrwQ2mCe4bcr9EPEkdOmcsUa+Jo8B1J5wiF8s9J0/DpGQNCt9ogkbladKwwZ/DNnNMtpGfdizlMzkKjAXPQDyxMwUCZqpkMOjYBrBpNADnGDESZDxZ5w4L3uQec5A7chTYCecAPiupBzDHkr0OWHQIKBotwqCzidGI17kTSKlhzFJOyFFgvgSBQXRrhuGr4QUnCFhyzOIbMDLinZTH18y523UTsJmBdS7ARiCQjEcg2fTjBdfrzc6foqCsemwtUUbqvI43jG2lxHMyMACW6MLK7K56Lrjm46qXZNGnkE+LB5AvHjlHudtBvF3MUqcn5eGgybd88aI+AP4KlbMaSF0ERwj2ocZKlxs5k8OXeA6KzkGirICcfwI3ChvEKm6Q/bHkbLbbtXLKUQRPKx+joCGPorGttKXzxTutWrZ41mnxGrdjDcC1LTdvOZcddbndg2DZ5fZoJANbqcuNGtygWttMdvTLtxsE+1uFXp9vafO7LV0ZTE3o/S9NqBqXwLDQ+QeSC23IVG1zDtVFYLD0s0Yf+ALgk0cL+F8wLCL+Ubo18agFqdT+oDeZo/7RL53EzsGUxnvpZtoqzDm9WO6o49JXKaMIpjRCPk1v/1Me6sUc0rZZcE5/BaXtpAQGd4Bozul5BbEDAwoqB6GcrOLcLFesZOw99Yjl7Ql7oeIUXjynBP4h/djT5m+nuF33PcPucwAAAABJRU5ErkJggg==);background-position:top left;background-repeat:no-repeat;background-size:contain;display:inline-block;height:31px;width:88px}.site-footer h2{font-size:24px;font-weight:bold;line-height:30px;margin-bottom:10px}.site-footer ul{list-style:none;margin:0 0 20px 0;padding:0}.site-footer .license{color:#777;font-size:13px}
        </style>
    </head>
    <body>
        <header class="site-header">
            <h1><a href="/php-the-right-way">PHP <em>La bonne manière</em></a></h1>
            <div class="build-date">Dernière MàJ: 2019-03-24 12:33:45 +0000</div>
            <div class="share">
                <a class="btn-share" href="https://twitter.com/intent/tweet?text=PHP+La+Bonne+manière&amp;url=http%3A%2F%2Feilgin.github.io%2Fphp-the-right-way&amp;hashtags=PHP" target="_blank">Partager sur Twitter</a>
            </div>
            <a class="fork-me" href="https://github.com/eilgin/php-the-right-way" target="_blank"></a>
        </header>

        <nav class="site-navigation">
            <input type="checkbox" id="toggle"/>
            <label for="toggle">Sommaire</label>
            <ul>
                <li><a href="/php-the-right-way/#welcome">Bienvenue</a>
                    <ul>
                        <li><a href="/php-the-right-way/#translations">Traductions</a></li>
                        <li><a href="/php-the-right-way/#how-to-contribute">Comment contribuer</a></li>
                        <li><a href="/php-the-right-way/#spread-the-word">Passez le mot!</a></li>
                    </ul>
                </li>
                
                
                    
                        
                    
                    <li><a href="/php-the-right-way/#getting_started">Pour démarrer</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#use_the_current_stable_version">Utiliser la dernière version stable (7.2)</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#builtin_web_server">Serveur web intégré</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#mac_setup">Installation sous Mac</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#windows_setup">Installation sous Windows</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#code_style_guide">Normes</a>
                    
                        <ul>
                        
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#language_highlights">Les points importants du langage</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#programming_paradigms">Les paradigmes de programmation</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#namespaces">Les espaces de noms</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#standard_php_library">Bibliothèque PHP standard</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#command_line_interface">Interface en ligne de commande</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#xdebug">XDebug</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#dependency_management">La gestion des dépendances</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#composer_and_packagist">Composer et Packagist</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#pear">Pear</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#coding_practices">Pratiques de programmation</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#the_basics">Les bases</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#date_and_time">La date et le temps</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#design_patterns">Les motifs de conception</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#php_and_utf8">Travailler avec de l'UTF-8</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#dependency_injection">Injection de dépendance</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#basic_concept">Concepts de base</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#complex_problem">Problèmes complexes</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#containers">Conteneurs</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#dependency_injection_further_reading">Lecture approfondie</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#databases">Bases de données</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#mysql_extension">Extension MySQL</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#pdo_extension">Extension PDO</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#interacting_via_code">Interagir avec les bases de données</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#databases_abstraction_layers">Couches d'abstraction</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#templating">Templating</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#templating_benefits">Bénéfices</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#plain_php_templates">Templates en PHP pur</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#compiled_templates">Templates compilés</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#templating_further_reading">Aller plus loin</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#errors_and_exceptions">Les erreurs et exceptions</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#errors">Erreurs</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#exceptions">Exceptions</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#security">Sécurité</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#web_application_security">La sécurité dans une application web</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#password_hashing">Hachage de mots de passe</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#data_filtering">Filtrage des données</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#configuration_files">Fichiers de configuration</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#register_globals">Register Globals</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#error_reporting">Rapport des erreurs</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#testing">Tests</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#test_driven_development">Développement dirigé par les tests</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#behavior_driven_development">Behavior Driven Development</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#complementary_testing_tools">Outils de test complémentaire</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#servers_and_deployment">Les serveurs et le déploiement</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#platform_as_a_service">Platform as a Service (PaaS)</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#virtual_or_dedicated_servers">Serveurs virtuels et dédiés</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#shared_servers">Hébergement mutualisé</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#building_your_application">Constuire et déployer votre application</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#virtualization">Virtualisation</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#vagrant">Vagrant</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#docker">Docker</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#caching">Cache</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#bytecode_caching">Cache du bytecode</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#object_caching">Cache des objets</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#documenting">Documentation du code</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#phpdoc">PHPDoc</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#resources">Ressources</a>
                    
                        <ul>
                        
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#frameworks">Frameworks</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#components">Composants</a>
                    
                        </li>
                    
                    
                
                    
                    <li><a href="/php-the-right-way/#books">Livres</a>
                    
                        </li>
                    
                    
                
                    
                        
                            </ul>
                            </li>
                            
                        
                    
                    <li><a href="/php-the-right-way/#community">Communauté</a>
                    
                        <ul>
                        
                    
                    
                
                    </ul>
                </li>
                <li><a href="/php-the-right-way/#credits">Crédits</a></li>
            </ul>
        </nav>

        <div class="site-content chapters">
            
<section class="chapter" id="welcome">
    <h1 id="bienvenue">Bienvenue</h1>

<p>Il existe énormément d’informations obsolètes sur la toile à propos de PHP, ce qui conduit les nouveaux utilisateurs de PHP à prendre de mauvaises habitudes, propageant de mauvaises pratiques et du code peu sûr.
<em>PHP: La bonne manière</em> est une référence concise et facile à lire à propos des conventions d’écriture
les plus connues sur le PHP, des liens sur les tutoriaux faisant autorité sur le web et des pratiques que les contributeurs de ce document considèrent comme meilleures à l’heure actuelle.</p>

<p><em>Il n’existe pas une seule et unique façon d’utiliser PHP</em>. Ce site web a pour but d’amener les nouveaux développeurs PHP sur des sujets qu’ils n’auraient pas pu découvrir avant qu’il ne soit trop tard, et vise
à donner aux professionnels chevronnés des idées neuves sur ces sujets qu’ils ont pu traiter pendant des années sans
s’être penchés dessus. Ce site web ne vous dira pas quels outils utiliser, mais au lieu de cela vous offre
des suggestions sur plusieurs options, et quand c’est possible en vous expliquant les différences dans l’approche et
les cas d’utilisations.</p>

<p>Ce document n’est pas figé et sera amené à être mis à jour avec des informations utiles et des exemples au fur et à
mesure qu’ils seront disponibles.</p>

<h2 id="translations">Traductions</h2>

<p><em>PHP: La bonne manière</em> est (déjà) traduit en plusieurs langues :</p>

<ul>
  <li><a href="http://www.phptherightway.com">English</a></li>
  <li><a href="http://rwetzlmayr.github.io/php-the-right-way">Deutsch</a></li>
  <li><a href="http://phpdevenezuela.github.io/php-the-right-way">Español</a></li>
  <li><a href="http://eilgin.github.io/php-the-right-way/">Français</a></li>
  <li><a href="http://id.phptherightway.com">Indonesia</a></li>
  <li><a href="http://it.phptherightway.com">Italiano</a></li>
  <li><a href="http://pl.phptherightway.com">Polski</a></li>
  <li><a href="http://br.phptherightway.com">Português do Brasil</a></li>
  <li><a href="https://bgui.github.io/php-the-right-way/">Română</a></li>
  <li><a href="http://sl.phptherightway.com">Slovenščina</a></li>
  <li><a href="http://phpsrbija.github.io/php-the-right-way/">Srpski</a></li>
  <li><a href="http://hkulekci.github.io/php-the-right-way/">Türkçe</a></li>
  <li><a href="http://bg.phptherightway.com">български</a></li>
  <li><a href="http://getjump.github.io/ru-php-the-right-way">Русский язык</a></li>
  <li><a href="http://iflista.github.com/php-the-right-way">Українська</a></li>
  <li><a href="https://adaroobi.github.io/php-the-right-way/">العربية</a></li>
  <li><a href="http://novid.github.io/php-the-right-way/">فارسى</a></li>
  <li><a href="https://apzentral.github.io/php-the-right-way/">ภาษาไทย</a></li>
  <li><a href="http://modernpug.github.io/php-the-right-way">한국어판</a></li>
  <li><a href="http://ja.phptherightway.com">日本語</a></li>
  <li><a href="http://laravel-china.github.io/php-the-right-way/">简体中文</a></li>
  <li><a href="http://laravel-taiwan.github.io/php-the-right-way">繁體中文</a></li>
</ul>

<h2 id="livre">Livre</h2>

<p>La version la plus récente de <em>PHP: The Right Way</em> (en) est aussi disponible au format PDF, EPUB et MOBI. <a href="https://leanpub.com/phptherightway">Voir sur Leanpub</a></p>

<h2 id="how-to-contribute">Comment contribuer</h2>

<p>Aidez-nous à faire de ce site la meilleure ressource disponible
pour les nouveaux programmeurs PHP. <a href="https://github.com/codeguy/php-the-right-way/tree/gh-pages">Contribuer sur GitHub</a></p>

<h2 id="spread-the-word">Faites passer le mot!</h2>

<p><em>PHP: La bonne manière</em> a des bannières que vous pouvez utiliser sur votre site. Montrez votre soutien au projet et
faites connaître aux nouveaux développeurs PHP où trouver la bonne information !</p>

<p><a href="/php-the-right-way/banners.html">Voir les bannières</a></p>


</section>



<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="getting_started">
    <h1 id="getting_started_title">Pour démarrer</h1>

</section>


<section class="chapter" id="use_the_current_stable_version">
    <h2 id="use_the_current_stable_version_title">Utiliser la dernière version stable (7.2)</h2>

<p>Si vous venez juste de commencer à utiliser PHP, prenez soin de débuter avec la dernière version stable
de <a href="http://www.php.net/downloads.php">PHP</a>. Le PHP a fait de grands progrès en ajoutant de <a href="#les_points_importants_du_language">puissantes fonctionnalités</a>
au cours des dernières années. Le moteur de PHP (<em>Zend engine 3</em>) a par ailleurs été largement ré-écrit pour être
beaucoup plus rapide que les versions précédentes.</p>

<p>Vous trouverez encore de nombreuses références à PHP 5.x dont la dernière itération est la 5.6.
Si vous vous retrouvez à maintenir du code 5.x, n’hésitez pas à migrer vers cette dernière version stable. Il faut tout de même savoir que <a href="http://php.net/supported-versions.php">les mises à jour de sécurité ne se feront plus après 2018</a>.
La migration vers la version 7.2 reste néanmoins très aisée car il n’existe pas énormement de <a href="http://php.net/manual/fr/migration72.incompatible.php">changements
incompatibles</a>.</p>

<p>Ne vous laissez pas avoir par le numéro de version mineur entre PHP 5.2 et 5.6, cela
représente d’<em>importantes améliorations</em>. Si vous cherchez des informations sur l’utilisation d’une fonction particulière,
 n’hésitez pas à consulter la documentation sur le site <a href="http://www.php.net/manual/fr/">php.net</a>.</p>


</section>


<section class="chapter" id="builtin_web_server">
    <h2 id="builtin_web_server_title">Serveur web intégré</h2>

<p>Vous pouvez commencer à apprendre PHP sans avoir à installer et configurer un serveur web (vous devrez utiliser au 
minimum PHP 5.4). Pour démarrer le serveur intégré, exécutez la ligne de commande suivante dans un terminal à la racine 
de votre projet :</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">&gt;</span> php <span class="nt">-S</span> localhost:8000</code></pre></figure>

<ul>
  <li><a href="http://www.php.net/manual/fr/features.commandline.webserver.php">Apprenez en plus sur l’outil en ligne de commandes</a></li>
</ul>


</section>


<section class="chapter" id="mac_setup">
    <h2 id="mac_setup_title">Installation sous Mac</h2>

<p>Le système d’exploitation OSX contient une version précompilée de PHP mais est généralement en retard sur la dernière 
version stable. Yosemite contient la version 5.5.9, El Capitan 5.5.29, Sierra 5.6.24. Il est à noter que High Sierra possède la dernière version majeure de PHP, plus précisement la version 7.1.6.</p>

<h3 id="installation-via-un-gestionnaire-de-paquets">Installation via un gestionnaire de paquets</h3>

<p>Pour mettre à jour la version de PHP sur OSX vous pouvez passer via 
de nombreux <a href="http://www.php.net/manual/fr/install.macosx.packages.php">gestionnaire de paquets</a>, <a href="http://php-osx.liip.ch/">php-osx de Liip</a> étant recommandé.</p>

<h3 id="installation-depuis-la-source">Installation depuis la source</h3>

<p>L’autre option est de le <a href="http://www.php.net/manual/fr/install.macosx.compile.php">compiler soi-même</a>. Dans ce cas, faites attention à ce que l’IDE Xcode soit 
 installé ou bien son <a href="https://developer.apple.com/downloads">substitut en ligne de commande</a> téléchargeable 
sur le Mac Developer Center d’Apple.</p>

<h3 id="installation-tout-en-un">Installation “Tout-en-un”</h3>

<p>Pour une installation “tout-en-un” incluant PHP, le serveur web Apache et la base de données MySQL, le tout contrôlé 
par une jolie interface graphique, essayez <a href="http://www.mamp.info/en/downloads/index.html">MAMP</a> ou <a href="http://www.apachefriends.org/fr/index.html">XAMPP</a>.</p>


</section>


<section class="chapter" id="windows_setup">
    <h2 id="windows_setup_title">Installation sous Windows</h2>

<p>PHP est disponible sous Windows de plusieurs façons. Vous pouvez <a href="http://windows.php.net">télécharger les binaires</a> et jusqu’à 
récemment, vous pouviez utiliser un installateur ‘.msi’. Cependant il n’est plus maintenu depuis la version 5.3.0.</p>

<p>Pour l’apprentissage et le développement en local, vous pouvez dorénavant utiliser le serveur intégré à PHP 5.4+, ainsi 
vous n’aurez plus à vous soucier de la configuration du serveur web. Si vous souhaitez un système “tout-en-un” incluant 
un serveur web et MySQL alors des outils tels que <a href="http://www.microsoft.com/web/downloads/platform.aspx">WPI</a>, <a href="http://www.zend.com/fr/products/server/free-edition">Zend Server CE</a>, <a href="https://www.apachefriends.org/fr/index.html">XAMPP</a> ou encore 
 <a href="http://www.wampserver.com/">WAMP</a> vous permettront d’avoir un environnement de développement complet rapidement. Ceci étant dit, ces 
outils sont différents de ce que l’on trouve en production donc faites attention sur les différences d’environnement si 
vous travaillez sur Windows et déployez sur Linux.</p>

<p>Si vous désirez utiliser Windows comme plateforme de production alors le serveur IIS7 vous donnera le meilleur compromis 
entre stabilité et performance. Vous pouvez utiliser <a href="http://phpmanager.codeplex.com/">phpmanager</a> qui est un plugin graphique pour IIS7 
afin d’effectuer les configurations nécessaires pour faire tourner PHP. IIS7 intègre FastCGI prêt à l’emploi, vous 
n’avez qu’à configurer PHP en tant qu’extension. Pour plus d’informations, visitez le site dédié sur <a href="http://php.iis.net/">iis.net</a>.</p>

<p>Généralement, faire tourner une application sur différents environnement de développement peut conduire à des comportements étranges ce qui peut être hasardeux une fois déployé en production. Si vous développez sous Windows mais que vos machines de production tournent sous Linux, vous feriez mieux de considérer l’utilisation de <a href="/#virtualization_title">machines virtuelles</a>.</p>

<p>Il existe toutefois un excellent article en anglais écrit par Chris Tankersley sur les <a href="http://ctankersley.com/2016/11/13/developing-on-windows-2016/">outils à utiliser</a> si vous souhaitez travailler sous Windows.</p>


</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="code_style_guide">
    <h1 id="code_style_guide_title">Normes</h1>

<p>La communauté PHP est large et diverse, composée d’innombrables bibliothèques, de frameworks et de composants. Il est 
courant pour les développeurs PHP de choisir plusieurs d’entre eux et de les combiner en un seul projet. Il est important 
que le code PHP adhère (de façon aussi proche que possible) à un style commun pour rendre le partage plus facile 
entre développeurs et de garder une certaine cohérence avec l’utilisation de code tiers.</p>

<p>Le <a href="http://www.php-fig.org/">Framework Interop Group</a> a proposé et approuvé une série de conventions de codage. Celles qui sont liées aux 
conventions d’écriture sont le <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">PSR-0</a>, le <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md">PSR-1</a>, le <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md">PSR-2</a> et le <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md">PSR-4</a>. Ces recommandations sont 
un ensemble de règles que certains projets ont adoptées comme Drupal, Zend, Symfony, CakePHP, phpBB, AWS SDK, 
FuelPHP, Lithium, etc. Vous pouvez les utiliser dans vos projets ou bien la vôtre si vous en avez une.</p>

<p>Idéalement, vous devriez écrire du code PHP qui adhère à des standards connus. Cela peut être une combinaison des PSR ou 
un des standards créés par PEAR ou Zend.</p>

<ul>
  <li><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">En savoir plus sur PSR-0</a></li>
  <li><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md">En savoir plus sur PSR-1</a></li>
  <li><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md">En savoir plus sur PSR-2</a></li>
  <li><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md">En savoir plus sur PSR-4</a></li>
  <li><a href="http://pear.php.net/manual/en/standards.php">Lire les conventions de codage de PEAR</a></li>
  <li><a href="http://framework.zend.com/wiki/display/ZFDEV2/Coding+Standards">Lire les conventions de codage de Zend</a></li>
  <li><a href="http://symfony.com/doc/current/contributing/code/standards.html">Lire les conventions de codage de Symfony</a></li>
</ul>

<p>Vous pouvez utiliser <a href="http://pear.php.net/package/PHP_CodeSniffer/">PHP_CodeSniffer</a> pour vérifier que votre code respecte une de ces recommandations. Des 
plugins pour des éditeurs de texte comme <a href="https://github.com/benmatselby/sublime-phpcs">Sublime Text 2</a> vous permettent d’avoir un aperçu des écarts en temps réel.</p>

<p>Utiliser le <a href="http://cs.sensiolabs.org/">PHP Coding Standards Fixer</a> de Fabien Potencier afin de formatter automatiquement la syntaxe de 
votre code selon les standards définis, ce qui vous évite de le faire vous-même à la main.</p>

<p>Faites en sorte que l’infrastructure de votre code et que les noms des variables choisis soient en anglais. Les 
commentaires peuvent être écrits dans n’importe quelle langue du moment que l’ensemble des personnes ayant à travailler 
dessus puissent les comprendre.</p>


</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="language_highlights">
    <h1 id="language_highlights_title">Les points importants du langage</h1>

</section>


<section class="chapter" id="programming_paradigms">
    <h2 id="programming_paradigms_title">Les paradigmes de programmation</h2>

<p>Le PHP est un langage flexible et dynamique, supportant une variété de techniques de programmation. Il a énormément évolué au 
cours des années en ajoutant notamment un solide modèle orienté objet avec PHP 5.0 (2004), les fonctions anonymes et 
les espaces de noms avec PHP 5.3 (2009) et les “traits” avec PHP 5.4 (2012).</p>

<h3 id="programmation-orientée-objet">Programmation orientée objet</h3>

<p>Le PHP a un ensemble très complet de principes de programmation orientée objet en prenant en compte le support des classes, 
des classes abstraites, des interfaces, de l’héritage, des constructeurs, du clonage, des exceptions, etc.</p>

<ul>
  <li><a href="http://www.php.net/manual/fr/language.oop5.php">En savoir plus sur l’orienté objet</a></li>
  <li><a href="http://www.php.net/traits">En savoir plus sur les “traits”</a></li>
</ul>

<h3 id="programmation-fonctionnelle">Programmation fonctionnelle</h3>

<p>Le PHP supporte les fonctions de “première classe” ce qui signifie qu’une fonction peut être affectée à une variable. 
Les fonctions définies par l’utilisateur ainsi que les fonctions intégrées au langage peuvent être référencées par une 
variable et invoquées dynamiquement. Les fonctions peuvent être passées en tant qu’argument à d’autres fonctions (on 
parle alors de fonctions d’ordre supérieur) et elles peuvent retourner d’autres fonctions.</p>

<p>La récursion est une fonctionnalité permettant à une fonction de s’appeler elle-même, cependant la plupart des fonctions 
PHP se concentrent sur la partie “itération”.</p>

<p>Les nouvelles fonctions anonymes avec le support pour les fermetures (<em>closures</em> en anglais) sont présentes depuis 
PHP 5.3 (2009).</p>

<p>Le PHP 5.4 a rajouté la possibilité de lier (“bind”) les fermetures à la portée d’un objet et a aussi amélioré le support pour 
les “callables” de façon à ce qu’elles puissent être utilisées aussi bien avec les fonctions anonymes (dans la plupart des 
cas).</p>

<ul>
  <li>Continuer la lecture sur la <a href="/php-the-right-way/pages/Functional-Programming.html">programmation fonctionnelle en PHP</a></li>
  <li><a href="http://www.php.net/manual/fr/functions.anonymous.php">En savoir plus sur les fonctions anonymes</a></li>
  <li><a href="http://php.net/manual/fr/class.closure.php">En savoir plus sur la classe Closure</a></li>
  <li><a href="https://wiki.php.net/rfc/closures">Plus de détails sur Closures RFC</a></li>
  <li><a href="http://php.net/manual/fr/language.types.callable.php">En savoir plus sur les callables</a></li>
  <li><a href="http://php.net/manual/fr/function.call-user-func-array.php">En savoir plus sur les fonctions invoquées dynamiquement avec <code class="highlighter-rouge">call_user_func_array</code></a></li>
</ul>

<h3 id="méta-programmation">Méta-programmation</h3>

<p>Le PHP supporte différentes formes de méta-programmation à travers des mécanismes tels que l’API Reflection et les 
méthodes magiques. Il existe un grand nombre de méthodes magiques comme <code class="highlighter-rouge">__get()</code>, <code class="highlighter-rouge">__set()</code>, <code class="highlighter-rouge">__clone()</code>, 
<code class="highlighter-rouge">__toString()</code>, <code class="highlighter-rouge">__invoke()</code>, etc permettant aux développeurs d’interférer avec le comportement d’une classe. Les 
développeurs Ruby répètent souvent que le PHP manque de <code class="highlighter-rouge">method_missing</code> mais cela est pourtant disponible avec 
<code class="highlighter-rouge">__call()</code> et <code class="highlighter-rouge">__callStatic()</code>.</p>

<ul>
  <li><a href="http://php.net/manual/fr/language.oop5.magic.php">En savoir plus sur les méthodes magiques</a></li>
  <li><a href="http://www.php.net/manual/fr/intro.reflection.php">En savoir plus sur l’API Reflection</a></li>
</ul>


</section>


<section class="chapter" id="namespaces">
    <h2 id="namespaces_title">Les espaces de noms</h2>

<p>Comme mentionné plus haut, la communauté PHP a beaucoup de développeurs créant beaucoup de code. Cela signifie que le 
code d’une bibliothèque PHP peut utiliser le même nom de classe qu’une autre bibliothèque. Quand plusieurs bibliothèques 
sont utilisées dans le même espace de nom, il peut y avoir des collisions de noms, ce qui pose problème.</p>

<p><em>Les espaces de nom</em> résolvent ce problème. Comme décrit dans le manuel de référence PHP, les espaces de nom peuvent 
être comparés aux répertoires d’un système de fichiers. De même, deux classes PHP peuvent avoir le même nom si elles sont 
créées dans des espaces de nom distincts.</p>

<p>Il est important pour vous que vous utilisiez les espaces de nom dans votre code. Ainsi vous et d’autres développeurs 
pourrez utiliser ce code sans crainte d’entrer en collision avec d’autres bibliothèques.</p>

<p>Une bonne manière d’utiliser les espaces de nom se trouve dans le <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">PSR-0</a> qui vise à fournir un fichier standard, 
une convention pour les classes et les espaces de nom pour permettre d’avoir du code “plug-and-play”.</p>

<p>En décembre 2013, le PHP-FIG a créé un nouveau standard d’autochargement: <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md">PSR-4</a>, qui un jour va probablement 
remplacer PSR-0. Pour le moment, les 2 sont utilisables étant donné que PSR-4 ne tourne que sur PHP 5.3+ et que 
beaucoup de projets implémentent PSR-0. Si vous pensez utiliser un standard d’autochargement pour une nouvelle 
application ou un paquetage alors vous devriez certainement voir du côté de PSR-4.</p>

<ul>
  <li><a href="http://php.net/manual/fr/language.namespaces.php">En savoir plus sur les espaces de noms</a></li>
  <li><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">En savoir plus sur PSR-0</a></li>
  <li><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md">En savoir plus sur PSR-4</a></li>
</ul>


</section>


<section class="chapter" id="standard_php_library">
    <h2 id="standard_php_library_title">La bibliothèque PHP standard</h2>

<p>La bibliothèque standard PHP (SPL en anglais) est fournie avec PHP et donne accès à une collection de classes et 
d’interfaces. Elle est composée de classes permettant de manipuler les structures de données les plus courantes comme les 
piles (stack), les files (queue), les tas (heap) et des itérateurs qui peuvent parcourir ces structures ou vos propres 
classes implémentant les interfaces SPL.</p>

<ul>
  <li><a href="http://php.net/manual/fr/book.spl.php">En savoir plus sur la SPL</a></li>
</ul>


</section>


<section class="chapter" id="command_line_interface">
    <h2 id="command_line_interface_title">L’interface en ligne de commande</h2>

<p>Le PHP a été créé principalement pour écrire des applications web mais il peut être tout aussi utile pour écrire des 
programmes en ligne de commande (<em>command line interface</em> ou CLI en anglais). Ces programmes peuvent vous aider à 
automatiser les tâches les plus courantes comme les tests, le déploiement et l’administration du site.</p>

<p>Les programmes PHP CLI sont puissants car vous pouvez directement utiliser le code de votre application sans avoir à 
créer et à réaliser une interface web “sécurisée”. Faites juste attention à ne pas mettre vos scripts PHP à la racine 
de votre répertoire web public.</p>

<p>Essayez de faire tourner PHP en ligne de commande:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> php <span class="nt">-i</span></code></pre></figure>

<p>L’option <code class="highlighter-rouge">-i</code> va afficher votre configuration exactement comme la fonction <a href="http://php.net/manual/fr/function.phpinfo.php"><code class="highlighter-rouge">phpinfo</code></a>.</p>

<p>L’option <code class="highlighter-rouge">-a</code> fournit un terminal interactif similaire aux terminaux ruby (IRB) et python. Il existe par ailleurs 
d’autres <a href="http://www.php.net/manual/fr/features.commandline.options.php">options utiles</a>.</p>

<p>Écrivons un simple programme CLI “Hello, $nom”. Pour faire ces essais, créez un fichier nommé <code class="highlighter-rouge">hello.php</code> et écrivez le 
code ci-dessous.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$argc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Usage: php hello.php [nom].</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="nv">$argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="k">echo</span> <span class="s2">"Hello, </span><span class="nv">$nom</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span></code></pre></figure>

<p>Le PHP crée 2 variables spéciales basées sur les paramètres passés au script. La variable <a href="http://php.net/manual/fr/reserved.variables.argc.php"><code class="highlighter-rouge">$argc</code></a> est un entier 
contenant le <em>nombre de paramètres</em> et <a href="http://php.net/manual/fr/reserved.variables.argv.php"><code class="highlighter-rouge">$argv</code></a> est un tableau contenant chacune des <em>valeurs des paramètres</em>. Le premier 
paramètre est toujours le nom du script PHP, dans notre cas <code class="highlighter-rouge">hello.php</code>.</p>

<p>L’expression <code class="highlighter-rouge">exit()</code> est utilisée avec un nombre différent de zéro pour indiquer au terminal que la commande a échoué. Les 
codes de sortie les plus communs se trouvent <a href="http://www.gsp.com/cgi-bin/man.cgi?section=3&amp;topic=sysexits">ici</a>.</p>

<p>Pour exécuter le script ci-dessus depuis le terminal:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> php hello.php
Usage: php hello.php <span class="o">[</span>nom]
<span class="o">&gt;</span> php hello.php world
Hello, world</code></pre></figure>

<ul>
  <li><a href="http://php.net/manual/fr/features.commandline.php">En savoir plus sur l’exécution de PHP en ligne de commande</a></li>
  <li><a href="http://www.php.net/manual/fr/install.windows.commandline.php">Comment mettre en place PHP en ligne de commande sur Windows</a></li>
</ul>


</section>


<section class="chapter" id="xdebug">
    <h2 id="xdebug_title">XDebug</h2>

<p>Un des outils les plus utiles dans le développement logiciel est un bon débogueur. Il vous permet de tracer l’exécution 
de votre code et de surveiller le contenu de la pile. XDebug, le debogueur de PHP, peut être utilisé par de nombreux 
EDIs pour fournir des fonctionnalités telles que les point d’arrêts ou l’inspection de la pile. Il permet aussi à des outils comme 
PHPUnit et KCacheGrind de faire de l’analyse pour la couverture de code et du “profiling”.</p>

<p>Si vous vous trouvez dans une closure, que vous avez recours à var_dump/print_r et que vous ne trouvez toujours pas de 
solution - alors vous devriez utiliser un débogueur.</p>

<p><a href="http://xdebug.org/docs/install">Installer XDebug</a> peut se révéler compliqué mais l’une des fonctionnalités les plus importantes est 
le “deboguage à distance” - Si vous développez du code localement et que vous testez ensuite sur une machine virtuelle 
voir un autre serveur alors le déboguage à distance vous permettra de le faire sans problème.</p>

<p>Traditionellement, vous allez modifier votre fichier VHost Apache ou votre .htaccess avec les valeurs suivantes:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php_value xdebug.remote_host=192.168.?.?
php_value xdebug.remote_port=9000
</code></pre></div></div>

<p>Le “remote host” et “remote port” correspondent à l’IP de votre ordinateur et au port sur lequel votre EDI va écouter. 
Il suffit alors de configurer votre EDI pour écouter sur le port choisi et de charger l’URL:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://votre-site.exemple.com/index.php?XDEBUG_SESSION_START=1
</code></pre></div></div>

<p>Votre EDI va maintenant intercepter l’état courant au fur et à mesure que le script s’exécute vous permettant de mettre 
des points d’arrêts et d’inspecter les valeurs en mémoire.</p>

<p>Les débogueurs graphiques permettent de se déplacer très facilement dans le code, d’inspecter les variables et 
d’évaluer du code à l’exécution.
Beaucoup d’EDI ont un support intégré ou via un plugin pour le déboguage avec xdebug. MacGDBp est un xdebug gratuit, 
open-source pour Mac.</p>

<ul>
  <li><a href="http://xdebug.org/docs/">En savoir plus sur XDebug</a></li>
  <li><a href="http://www.bluestatic.org/software/macgdbp/">En savoir plus sur MacGDBp</a></li>
</ul>


</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="dependency_management">
    <h1 id="dependency_management_title">La gestion des dépendances</h1>

<p>Il existe une tonne de bibliothèques PHP, de frameworks et de composants pour gérer les dépendances. Votre projet va 
sûrement utiliser plusieurs d’entre eux — ce sont les dépendances d’un projet. Jusqu’à récemment, le PHP n’avait pas de 
moyen fiable pour gérer ces dépendances : même si vous les gériez de façon manuelle, vous deviez toujours vous 
inquiéter des autoloaders. Mais plus maintenant.</p>

<p>À l’heure actuelle, il existe deux gestionnaires de packaging pour PHP - Composer et PEAR. Lequel correspond le mieux à 
vos attentes ? Cela dépend de la taille de votre projet.</p>

<ul>
  <li>Utiliser <strong>Composer</strong> pour la gestion des dépendances d’un seul projet.</li>
  <li>Utiliser <strong>PEAR</strong> lorsque vous devez gérer les dépendances pour un système complet.</li>
</ul>

<p>En général, les packages Composer seront disponibles uniquement pour les projets auxquels vous les aurez explicitement 
spécifiés alors qu’un package PEAR sera disponible pour tous vos projets PHP. Bien que PEAR semble être la meilleure 
approche au premier regard, il existe de nombreux avantages à utiliser une approche de gestion des dépendances par 
projet.</p>

</section>


<section class="chapter" id="composer_and_packagist">
    <h2 id="composer_and_packagist_title">Composer et Packagist</h2>

<p>Composer est un <strong>excellent</strong> gestionnaire de dépendances pour PHP. Listez les dépendances de votre projet dans un fichier 
<code class="highlighter-rouge">composer.json</code> et en quelques commandes, Composer va automatiquement télécharger ces dépendances et les installer pour 
vous.</p>

<p>Il existe déjà un grand nombre de bibliothèques PHP compatibles avec Composer, prêtes à être utilisées par votre projet. 
Ces “paquets” sont listés sur <a href="http://packagist.org/">Packagist</a>, le répertoire officiel pour les bibliothèques compatibles avec Composer.</p>

<h3 id="comment-installer-composer">Comment installer Composer</h3>

<p>Vous pouvez installer Composer localement (dans votre répertoire de travail courant; bien que cela ne soit plus 
recommandé) ou globalement (par ex., /usr/local/bin). Supposons que vous vouliez installer Composer localement. 
Depuis la racine de votre projet, tapez :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -s https://getcomposer.org/installer | php
</code></pre></div></div>

<p>Cela va télécharger <code class="highlighter-rouge">composer.phar</code> qui est une archive PHP binaire. Vous pouvez la lancer avec <code class="highlighter-rouge">php</code> pour gérer vos 
dépendances. <strong>Attention : </strong> Si vous redirigez du code téléchargé directement dans un interpréteur, 
veuillez d’abord lire le code en ligne pour confirmer qu’il est sûr.</p>

<h4 id="installation-sous-windows">Installation sous Windows</h4>
<p>Pour les utilisateurs de Windows, la façon la plus pratique de mettre en place Composer est d’installer <a href="https://getcomposer.org/Composer-Setup.exe">ComposerSetup</a>
qui va faire tout le travail pour vous (modification du <code class="highlighter-rouge">$PATH</code>) afin d’appeler l’utilitaire <code class="highlighter-rouge">composer</code> directement
depuis votre terminal.</p>

<h3 id="comment-installer-composer-manuellement">Comment installer Composer (manuellement)</h3>

<p>Installer manuellement Composer est une technique avancée, cependant il existe diverses raisons pour lesquelles un 
développeur aurait besoin de le faire. L’installation interactive va vérifier que la version installée:</p>

<ul>
  <li>contient une version suffisamment récente pour être utilisable</li>
  <li>peut exécuter correctement des fichiers <code class="highlighter-rouge">.phar</code></li>
  <li>a des permissions suffisantes sur certaines répertoires</li>
  <li>possède des extensions problématiques qui ne seront alors pas chargées</li>
  <li>a les bonnes configurations au niveau du fichier <code class="highlighter-rouge">php.ini</code></li>
</ul>

<p>Étant donné qu’une installation manuelle n’effectue aucune de ces vérifications, vous devrez décider vous-même 
du meilleur compromis à faire. Voici comment obtenir Composer manuellement :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -s https://getcomposer.org/composer.phar -o $HOME/local/bin/composer
chmod +x $HOME/local/bin/composer
</code></pre></div></div>

<p>Le chemin <code class="highlighter-rouge">$HOME/local/bin</code> (ou le répertoire de votre choix) doit être dans la variable d’environement <code class="highlighter-rouge">$PATH</code>. Ainsi, 
la commande <code class="highlighter-rouge">composer</code> peut être accessible de partout.</p>

<p>Quand vous tombez sur de la documentation qui indique de lancer Composer avec <code class="highlighter-rouge">php composer.phar install</code>, vous pouvez 
substituer cette commande avec:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>composer install
</code></pre></div></div>

<p>La section suivante part du principe que vous avez installé Composer “globlalement”.</p>

<h3 id="comment-définir-et-installer-les-dépendances">Comment définir et installer les dépendances</h3>

<p>Composer garde la trace des dépendances de votre projet dans un fichier nommé <code class="highlighter-rouge">composer.json</code>. Vous pouvez le maintenir 
vous même à la main ou utiliser Composer. La commande <code class="highlighter-rouge">composer require</code> ajoute une dépendance à votre projet et, si 
vous n’avez pas de fichier <code class="highlighter-rouge">composer.json</code>, va le créer. Voici un exemple qui ajoute <a href="http://twig.sensiolabs.org">Twig</a> en tant que dépendance 
pour votre projet:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>composer require twig/twig:~1.8
</code></pre></div></div>

<p>Alternativement, la commande <code class="highlighter-rouge">composer init</code> va vous guider à travers la création du fichier <code class="highlighter-rouge">composer.json</code>. De toute 
manière, une fois que ce fichier est créé, vous pouvez indiquer à Composer de télécharger et d’installer vos dépendances 
dans le répertoire <code class="highlighter-rouge">vendors/</code>. Cela s’applique aussi aux projets que vous avez téléchargés et qui possèdent déjà un 
fichier <code class="highlighter-rouge">composer.json</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>composer install
</code></pre></div></div>

<p>Ensuite, ajoutez cette ligne dans le fichier PHP principal de votre application; cela va dire à PHP d’utiliser 
l’auto-chargeur de Composer pour les dépendances de votre projet:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span></code></pre></figure>

<p>Maintenant si vous utilisez les bibliothèques dont votre projet est dépendant, elles seront chargées à la demande.</p>

<h3 id="mettre-à-jour-vos-dépendances">Mettre à jour vos dépendances</h3>

<p>Composer crée un fichier appelé <code class="highlighter-rouge">composer.lock</code> qui stocke la version exacte de chaque paquet qui a été téléchargé 
quand vous avez exécuté pour la première fois <code class="highlighter-rouge">php composer.phar install</code>. Si vous partagez votre projet avec 
d’autres développeurs et que le fichier <code class="highlighter-rouge">composer.lock</code> y est inclus alors ils auront les mêmes versions que vous. Pour 
mettre à jour toutes les dépendances, exécuter <code class="highlighter-rouge">php composer.phar update</code>.</p>

<p>Cela est très pratique quand vous définissez les versions requises de façon flexible. Par exemple, une version exigée de 
~1.8 signifie “tout ce qui est plus récent que 1.8.0 mais inférieur à 2.0.x-dev”. Vous pouvez aussi utiliser le joker <code class="highlighter-rouge">*</code> 
comme par exemple <code class="highlighter-rouge">1.8.*</code>. À partir de là, la commande <code class="highlighter-rouge">php composer.phar update</code> va mettre à jour vos dépendances à 
la dernière version en suivant les restrictions demandées.</p>

<h3 id="notifications-de-mise-à-jour">Notifications de mise à jour</h3>

<p>Pour recevoir les notifications de nouvelles versions vous pouvez vous enregistrer sur <a href="https://www.versioneye.com/">VersionEye</a> qui est un 
service web qui surveille vos fichiers <code class="highlighter-rouge">composer.json</code> sur vos comptes Github et BitBucket et vous envoie des emails 
avec les nouvelles versions.</p>

<h3 id="vérifier-vos-dépendances-pour-des-raisons-de-sécurité">Vérifier vos dépendances pour des raisons de sécurité</h3>

<p>Le <a href="https://security.sensiolabs.org/">Security Advisories Checker</a> est un service web et un outil en ligne de commande qui va examiner votre fichier 
<code class="highlighter-rouge">composer.lock</code> et vous dire si vous avez besoin d’une mise à jour sur chacune de vos dépendances.</p>

<ul>
  <li><a href="http://getcomposer.org/doc/00-intro.md">En savoir plus sur Composer</a></li>
</ul>


</section>


<section class="chapter" id="pear">
    <h2 id="pear_title">PEAR</h2>

<p>Un autre ancien gestionnaire de paquets que beaucoup de développeurs PHP adorent est <a href="http://pear.php.net/">PEAR</a>. Il se comporte pratiquement 
de la même façon que Composer mais possède des différences notables.</p>

<p>PEAR exige que chaque paquet ait une structure spécifique ce qui veut dire que l’auteur du paquet doit le préparer en 
vue d’être utilisé par PEAR. Utiliser une bibliothèque qui n’était pas préparée pour PEAR ne marchera pas.</p>

<p>PEAR installe les paquets de façon globale, ce qui signifie qu’après les avoir installés, ils seront accessibles depuis 
n’importe quel projet sur le serveur. Cela peut être intéressant si beaucoup de projets se basent sur la même version du 
même paquet mais peut poser problème en cas de conflits entre 2 projets ayant besoin de versions différentes.</p>

<h3 id="comment-installer-pear">Comment installer PEAR</h3>

<p>Vous pouvez installer PEAR en téléchargeant l’installateur phar et en l’exécutant. La documentation PEAR a des 
<a href="http://pear.php.net/manual/fr/installation.getting.php">instructions détaillées</a> pour chaque système d’exploitation.</p>

<p>Si vous utilisez Linux, vous pouvez aussi vous baser sur le gestionnaire de paquets de votre distribution. Par exemple 
pour Debian et Ubuntu, il existe un paquet s’appelant <code class="highlighter-rouge">php-pear</code>.</p>

<h3 id="comment-installer-un-paquet">Comment installer un paquet</h3>

<p>Si le paquet est listé sur la <a href="http://pear.php.net/packages.php">liste des paquets PEAR</a>, vous pouvez l’installer en spécifiant son nom officiel:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pear install foo
</code></pre></div></div>

<p>Si le paquet est hébergé sur une autre canal, vous aurez alors besoin de <code class="highlighter-rouge">découvrir</code> ce canal et aussi de le 
spécifier lors de l’installation. Voir les <a href="http://pear.php.net/manual/fr/guide.users.commandline.channels.php">docs sur l’utilisation des canaux</a> pour plus d’informations sur ce sujet.</p>

<ul>
  <li><a href="http://pear.php.net/">En savoir plus sur PEAR</a></li>
</ul>

<h3 id="gérer-les-dépendances-pear-avec-composer">Gérer les dépendances PEAR avec Composer</h3>

<p>Si vous utilisez déjà <a href="/#composer_and_packagist">Composer</a> et que vous voulez installer quelques paquets gérés par PEAR, vous pouvez 
utiliser Composer pour gérer les dépendances à PEAR. L’exemple suivant va installer du code de <code class="highlighter-rouge">pear2.php.net</code>:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="s2">"repositories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pear"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://pear2.php.net"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"require"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"pear-pear2/PEAR2_Text_Markdown"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pear-pear2/PEAR2_HTTP_Request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>La première section <code class="highlighter-rouge">"repositories"</code> va être utilisée pour faire savoir à Composer qu’il doit “initialiser” (ou 
“découvrir” selon la terminologie PEAR) le répertoire pear. Ensuite la section <code class="highlighter-rouge">require</code> va préfixer le paquet de la 
façon suivante:</p>

<blockquote>
  <p>pear-channel/Package</p>
</blockquote>

<p>Le préfixe “pear” est écrit en dur pour éviter tout conflit étant donné que le canal pear peut être le même que d’autres 
paquets par exemple. Puis le nom court du canal (ou l’URL complète) peut être utilisé pour référencer dans quel canal se 
trouve le paquet.</p>

<p>Quand ce paquet est installé, il sera accessible dans votre répertoire de façon automatique grâce à l’auto-chargeur de 
Composer:</p>

<blockquote>
  <p>vendor/pear-pear2.php.net/PEAR2_HTTP_Request/pear2/HTTP/Request.php</p>
</blockquote>

<p>Pour utiliser ce paquet PEAR, référencez-le simplement de cette façon:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">pear2\HTTP\Request</span><span class="p">();</span></code></pre></figure>

<ul>
  <li><a href="http://getcomposer.org/doc/05-repositories.md#pear">En savoir plus sur la façon d’utiliser PEAR avec Composer</a></li>
</ul>


</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="coding_practices">
    <h1 id="coding_practices_title">Pratiques de programmation</h1>

</section>


<section class="chapter" id="the_basics">
    <h2 id="the_basics_title">Les bases</h2>

<p>PHP est un language vaste permettant aux programmeurs de tout niveau de produire du code non seulement rapidement mais 
aussi efficacement. Cependant, en avançant dans le langage, nous oublions parfois les bases que nous avions apprises 
(ou survolées) de façon un peu légère en faveur de raccourcis et autres mauvaises habitudes. Pour combattre ce problème 
récurrent, cette section tient à rappeler aux programmeurs les pratiques de programmation de base de PHP.</p>

<ul>
  <li>Continuer en lisant <a href="/php-the-right-way/pages/The-Basics.html">les bases</a>.</li>
</ul>

</section>


<section class="chapter" id="date_and_time">
    <h2 id="date_and_time_title">La date et le temps</h2>

<p>Le PHP a une classe nommée DateTime afin d’aider à lire, écrire, comparer et calculer avec les dates et le temps. Il existe 
beaucoup de fonctions liées aux dates en PHP en plus de DateTime, mais cette dernière fournit une interface orientée objet à 
la plupart des usages courants. Elle peut gérer les fuseaux horaires mais cela dépasse le cadre de notre introduction.</p>

<p>Pour commencer à travailler avec DateTime, convertissez les chaînes de caractères représentant des dates ou du temps avec 
la méthode <code class="highlighter-rouge">createFromFormat()</code> ou faites <code class="highlighter-rouge">new \DateTime</code>. Utilisez la méthode <code class="highlighter-rouge">format()</code> pour convertir la date 
vers une représentation sous forme de chaîne de caractères.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$raw</span> <span class="o">=</span> <span class="s1">'22. 11. 1968'</span><span class="p">;</span>
<span class="nv">$start</span> <span class="o">=</span> <span class="nx">\DateTime</span><span class="o">::</span><span class="na">createFromFormat</span><span class="p">(</span><span class="s1">'d. m. Y'</span><span class="p">,</span> <span class="nv">$raw</span><span class="p">);</span>

<span class="k">echo</span> <span class="s1">'Date : '</span> <span class="o">.</span> <span class="nv">$start</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">'m/d/Y'</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span></code></pre></figure>

<p>Le calcul des dates avec DateTime est possible à l’aide de la classe DateInterval. DateTime a des méthodes comme <code class="highlighter-rouge">add()</code> 
et <code class="highlighter-rouge">sub()</code> qui prennent une variable de type DateInterval en argument. N’écrivez pas du code qui attend que chaque jour 
ait le même nombre de secondes car le passage à l’heure d’été/d’hiver et les changements de fuseaux horaires brisent cette 
assertion. Utilisez plutôt les intervalles de date. Pour calculer ces différences, utilisez la méthode <code class="highlighter-rouge">diff()</code>. Cette 
dernière va retourner un objet DateInterval qui est très facile à afficher.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// créer une copie de $start et ajouter un mois et six jours
</span><span class="nv">$end</span> <span class="o">=</span> <span class="k">clone</span> <span class="nv">$start</span><span class="p">;</span>
<span class="nv">$end</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">\DateInterval</span><span class="p">(</span><span class="s1">'P1M6D'</span><span class="p">));</span>

<span class="nv">$diff</span> <span class="o">=</span> <span class="nv">$end</span><span class="o">-&gt;</span><span class="na">diff</span><span class="p">(</span><span class="nv">$start</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">'Différence: '</span> <span class="o">.</span> <span class="nv">$diff</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">'%m mois, %d jours (total: %a jours)'</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="o">//</span> <span class="nx">Différence</span><span class="o">:</span> <span class="mi">1</span> <span class="nx">mois</span><span class="p">,</span> <span class="mi">6</span> <span class="nx">jours</span> <span class="p">(</span><span class="nx">total</span><span class="o">:</span> <span class="mi">37</span> <span class="nx">jours</span><span class="p">)</span></code></pre></figure>

<p>Avec les objets DateTime vous pouvez utilisez les opérateurs de comparaison :</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$start</span> <span class="o">&lt;</span> <span class="nv">$end</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"</span><span class="nv">$start</span><span class="s2"> est avant </span><span class="nv">$end</span><span class="s2">!</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Un dernier exemple pour faire la démonstration de la classe DatePeriod. Il est utilisé pour itérer sur des évènements 
récurrents. Il peut prendre 2 objets DateTime, start et end, et l’intervalle pour lequel tous les évènements seront 
retournés.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// affiche tous les jeudis entre $start et $end
</span><span class="nv">$periodInterval</span> <span class="o">=</span> <span class="nx">\DateInterval</span><span class="o">::</span><span class="na">createFromDateString</span><span class="p">(</span><span class="s1">'first thursday'</span><span class="p">);</span>
<span class="nv">$periodIterator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\DatePeriod</span><span class="p">(</span><span class="nv">$start</span><span class="p">,</span> <span class="nv">$periodInterval</span><span class="p">,</span> <span class="nv">$end</span><span class="p">,</span> <span class="nx">\DatePeriod</span><span class="o">::</span><span class="na">EXCLUDE_START_DATE</span><span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$periodIterator</span> <span class="k">as</span> <span class="nv">$date</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affiche chaque date pour la période
</span>    <span class="k">echo</span> <span class="nv">$date</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">'m/d/Y'</span><span class="p">)</span> <span class="o">.</span> <span class="s1">' '</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<ul>
  <li><a href="http://www.php.net/manual/book.datetime.php">En savoir plus sur DateTime</a></li>
  <li><a href="http://www.php.net/manual/function.date.php">En savoir plus sur le formatage des dates</a> (les formats et options acceptées)</li>
</ul>


</section>


<section class="chapter" id="design_patterns">
    <h2 id="design_patterns_title">Les motifs de conception</h2>

<p>Lorsque vous construisez votre application, il est souvent utile d’utiliser des motifs courants dans votre code et dans 
la structure générale de votre projet. Utiliser ces motifs est utile car il devient alors plus facile de gérer le code 
et de permettre aux autres développeurs de comprendre plus rapidement comment tout cela tient.</p>

<p>Si vous utilisez un framework, alors la plupart du code métier et la structure du projet se baseront sur ce framework, 
donc de nombreuses décisions sur les motifs à utiliser seront prises à votre place. Mais c’est à vous de choisir les 
motifs les plus utiles à utiliser au sein de votre code. Si, d’un autre côté, vous n’utilisez pas 
de framework pour construire votre application, cela ne vous empêchera pas de choisir un certain nombre de motifs que 
vous jugerez nécessaires.</p>

<ul>
  <li>Continuer la lecture sur les <a href="/php-the-right-way/pages/Design-Patterns.html">motifs de conceptions</a>.</li>
</ul>

</section>


<section class="chapter" id="php_and_utf8">
    <h2 id="php_and_utf8_title">Travailler avec de l’UTF-8</h2>

<p><em>Cette section a été traduite à partir de la page d’<a href="https://alexcabal.com/">Alex Cabal</a> sur les 
<a href="https://phpbestpractices.org/#utf-8">meilleures pratiques PHP</a> et sert de base pour vous donner des conseils sur 
l’utilisation de l’UTF-8</em>.</p>

<h3 id="il-ny-a-pas-de-recette-magique-faites-attention-soyez-consciencieux-et-cohérent">Il n’y a pas de recette magique. Faites attention, soyez consciencieux et cohérent.</h3>

<p>Jusqu’à présent PHP n’inclut pas de support bas niveau pour l’unicode. Il existe des moyens de s’assurer que les chaînes 
de caractères encodées en UTF-8 seront traitées correctement mais cela n’est pas facile et demande une attention particulière 
tout le long de la chaîne de traitement, allant de la page HTML à vos requêtes SQL en passant par le PHP. Les prochains 
paragraphes vont tenter de vous résumer la bonne approche à adopter face à du contenu Unicode.</p>

<h3 id="utf-8-au-niveau-de-php">UTF-8 au niveau de PHP</h3>

<p>Les opérations basiques sur les chaînes de caractères comme la concaténation ou l’affectation de chaînes à des variables 
ne demandent rien de particulier en ce qui concerne l’UTF-8. En revanche, la plupart des fonctions manipulant les chaînes 
comme <code class="highlighter-rouge">strpos()</code> et <code class="highlighter-rouge">strlen()</code> ont besoin d’une attention particulière. Ces fonctions ont en effet souvent leur contre-partie 
<code class="highlighter-rouge">mb_*</code> comme <code class="highlighter-rouge">mb_strpos()</code> et <code class="highlighter-rouge">mb_strlen()</code>. Ces fonctions <code class="highlighter-rouge">mb_*</code> proviennent de
l’<a href="http://php.net/manual/fr/book.mbstring.php">extension pour les chaînes de caractères multi-octets</a> et ont été conçus spécialement pour les chaînes Unicode.</p>

<p>Vous devez utiliser les fonctions <code class="highlighter-rouge">mb_*</code> à chaque fois que vous manipulez une chaîne de caractère Unicode. Par exemple, 
si vous utilisez <code class="highlighter-rouge">substr()</code> sur une chaîne UTF-8, il y a de forte chance pour que le résultat contienne des caractères 
à moitié tronqués. La fonction correcte dans ce genre de cas serait d’utiliser <code class="highlighter-rouge">mb_substr()</code>.</p>

<p>La difficulté réside dans le fait de se souvenir à chaque fois d’utiliser les fonctions <code class="highlighter-rouge">mb_*</code> quand c’est nécessaire. 
Si jamais vous l’oubliez ne serait-ce qu’une seule fois alors votre chaîne Unicode aura de grande chance d’être incompréhensible 
en sortie de traitement.</p>

<p>Les fonctions traitant les chaînes n’ont pas toutes leur équivalent <code class="highlighter-rouge">mb_*</code>. S’il y en a une qui est dans ce cas alors 
vous n’avez pas de chance.</p>

<p>Vous devriez utiliser la fonction <code class="highlighter-rouge">mb_internal_encoding()</code> en haut de tout vos scripts PHP (ou en haut d’un fichier d’en-tête 
global) et la fonction <code class="highlighter-rouge">mb_http_output()</code> juste après si vous devez afficher du texte en sortie. Définir explicitement 
l’encodage de caractère de vos chaînes vous simplifiera énormement la vie.</p>

<p>Par ailleurs, beaucoup de fonctions PHP opérant sur les chaînes ont un paramètre optionnel vous permettant de spécifier 
l’encodage de caractère. Vous devriez alors toujours indiquer explicitement que vous utilisez de l’UTF-8. Par exemple, 
la fonction <code class="highlighter-rouge">htmlentities()</code> possède une option pour l’encodage des caractères. Notez que depuis PHP 5.4.0, l’UTF-8 est 
l’encodage par défaut pour <code class="highlighter-rouge">htmlentities()</code> et <code class="highlighter-rouge">htmlspecialchars()</code>.</p>

<p>Au final, si vous développez et déployez une application utilisant l’UTF-8 sans être certain que l’extension <code class="highlighter-rouge">mbstring</code> 
sera présente, pensez alors à utiliser des alternatives comme le package Composer <a href="https://packagist.org/packages/patchwork/utf8 (en)">patchwork/utf8</a>. Il utilisera <code class="highlighter-rouge">mbstring</code> 
si jamais il le trouve sinon il utilisera les fonctions non-UTF8.</p>

<h3 id="utf-8-au-niveau-de-la-base-de-données">UTF-8 au niveau de la base de données</h3>

<p>Si votre script PHP a accès à MySQL, il y a une forte chance que vos chaînes de caractères soient stockées en tant que chaînes 
non-UTF8 même si vous suivez les précautions vues plus haut.</p>

<p>Pour vous assurer que vos chaînes aillent de PHP vers MySQL en UTF-8, vérifiez que votre base de données et les tables 
qu’elle contient sont toutes enregistrées avec l’encodage de caractères et la collation <code class="highlighter-rouge">utf8mb4</code> et que votre connexion 
PDO soit aussi mise sur cet encodage. Voir l’exemple plus bas. Ceci est <em>extrêmement important</em>.</p>

<p>Notez que pour utiliser le support complet pour UTF-8, vous devez utiliser l’encodage de caractères <code class="highlighter-rouge">utf8mb4</code> et non 
<code class="highlighter-rouge">utf8</code> ! Voir les détails plus loin pour comprendre pourquoi.</p>

<h3 id="utf-8-au-niveau-du-navigateur-web">UTF-8 au niveau du navigateur web</h3>

<p>Utilisez la fonction <code class="highlighter-rouge">mb_http_output()</code> pour vous assurer que votre script PHP affichera du texte en UTF-8 dans votre 
navigateur.</p>

<p>Le navigateur devra ensuite être averti par le biais de la réponse HTTP que cette page est encodée en UTF-8. L’approche 
historique pour faire cela était d’inclure le <a href="http://htmlpurifier.org/docs/enduser-utf8.html">tag <code class="highlighter-rouge">&lt;meta&gt;</code></a> dans le tag 
<code class="highlighter-rouge">&lt;head&gt;</code>. Cette approche est parfaitement valide mais indiquer l’encodage directement dans l’en-tête HTTP <code class="highlighter-rouge">Content-Type</code> 
est en fait <a href="https://developers.google.com/speed/docs/best-practices/rendering#SpecifyCharsetEarly">plus rapide</a>.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// Indique à PHP que nous allons effectivement manipuler du texte UTF-8
</span><span class="nb">mb_internal_encoding</span><span class="p">(</span><span class="s1">'UTF-8'</span><span class="p">);</span>
 
<span class="c1">// indique à PHP que nous allons afficher du texte UTF-8 dans le navigateur web
</span><span class="nb">mb_http_output</span><span class="p">(</span><span class="s1">'UTF-8'</span><span class="p">);</span>
 
<span class="c1">// Notre chaîne UTF-8 de test
</span><span class="nv">$string</span> <span class="o">=</span> <span class="s1">'Êl síla erin lû e-govaned vîn.'</span><span class="p">;</span>
 
<span class="c1">// Découpe une sous partie de la chaîne à l'aide d'une fonction multi-octet
// Notez que la découpe se fait au niveau d'un caractère non-ascii pour la démonstration
</span><span class="nv">$string</span> <span class="o">=</span> <span class="nb">mb_substr</span><span class="p">(</span><span class="nv">$string</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">);</span>
 
<span class="c1">// Connexion à une base de données pour stocker la chaîne transformée
// Voir les exemples d'utilisation de PDO dans ce document
// Notez la commande `set names utf8mb4`
</span><span class="nv">$link</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\PDO</span><span class="p">(</span>   
                    <span class="s1">'mysql:host=your-hostname;dbname=your-db;charset=utf8mb4'</span><span class="p">,</span>
                    <span class="s1">'your-username'</span><span class="p">,</span>
                    <span class="s1">'your-password'</span><span class="p">,</span>
                    <span class="k">array</span><span class="p">(</span>
                        <span class="nx">\PDO</span><span class="o">::</span><span class="na">ATTR_ERRMODE</span> <span class="o">=&gt;</span> <span class="nx">\PDO</span><span class="o">::</span><span class="na">ERRMODE_EXCEPTION</span><span class="p">,</span>
                        <span class="nx">\PDO</span><span class="o">::</span><span class="na">ATTR_PERSISTENT</span> <span class="o">=&gt;</span> <span class="kc">false</span>
                    <span class="p">)</span>
                <span class="p">);</span>

<span class="c1">// Stocke notre chaîne en tant que chaîne UTF-8 dans la base de données
// Votre base ainsi que ses tables doivent être encodées avec utf8mb4 (character set et collation).
</span><span class="nv">$handle</span> <span class="o">=</span> <span class="nv">$link</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'insert into ElvishSentences (Id, Body) values (?, ?)'</span><span class="p">);</span>
<span class="nv">$handle</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
<span class="nv">$handle</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nv">$string</span><span class="p">);</span>
<span class="nv">$handle</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>

<span class="c1">// Récupère la chaîne que l'on vient juste de stocker pour prouver qu'elle a été correctement stockée
</span><span class="nv">$handle</span> <span class="o">=</span> <span class="nv">$link</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'select * from ElvishSentences where Id = ?'</span><span class="p">);</span>
<span class="nv">$handle</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
<span class="nv">$handle</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>

<span class="c1">// stocke le résultat dans un objet que l'on affichera dans notre HTML
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nv">$handle</span><span class="o">-&gt;</span><span class="na">fetchAll</span><span class="p">(</span><span class="nx">\PDO</span><span class="o">::</span><span class="na">FETCH_OBJ</span><span class="p">);</span>

<span class="nb">header</span><span class="p">(</span><span class="s1">'Content-Type: text/html; charset=utf-8'</span><span class="p">);</span>
<span class="cp">?&gt;&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>page de test UTF-8<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="cp">&lt;?php</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nv">$result</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">){</span>
            <span class="k">print</span><span class="p">(</span><span class="nv">$row</span><span class="o">-&gt;</span><span class="na">Body</span><span class="p">);</span>  <span class="c1">// Cela devrait correctement afficher notre contenu en UTF-8
</span>        <span class="p">}</span>
        <span class="cp">?&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<h3 id="pour-aller-plus-loin">Pour aller plus loin</h3>

<ul>
  <li><a href="http://php.net/manual/fr/language.operators.string.php">Manuel PHP: Opérations sur les chaînes de caractères</a></li>
  <li><a href="http://php.net/manual/fr/ref.strings.php">Manuel PHP: Fonctions sur les chaînes de caractères</a>
    <ul>
      <li><a href="http://php.net/manual/fr/function.strpos.php"><code class="highlighter-rouge">strpos()</code></a></li>
      <li><a href="http://php.net/manual/fr/function.strlen.php"><code class="highlighter-rouge">strlen()</code></a></li>
      <li><a href="http://php.net/manual/fr/function.substr.php"><code class="highlighter-rouge">substr()</code></a></li>
    </ul>
  </li>
  <li><a href="http://php.net/manual/fr/ref.mbstring.php">Manuel PHP: Fonctions sur les chaînes multi-octets</a>
    <ul>
      <li><a href="http://php.net/manual/fr/function.mb-strpos.php"><code class="highlighter-rouge">mb_strpos()</code></a></li>
      <li><a href="http://php.net/manual/fr/function.mb-strlen.php"><code class="highlighter-rouge">mb_strlen()</code></a></li>
      <li><a href="http://php.net/manual/fr/function.mb-substr.php"><code class="highlighter-rouge">mb_substr()</code></a></li>
      <li><a href="http://php.net/manual/fr/function.mb-internal-encoding.php"><code class="highlighter-rouge">mb_internal_encoding()</code></a></li>
      <li><a href="http://php.net/manual/fr/function.mb-http-output.php"><code class="highlighter-rouge">mb_http_output()</code></a></li>
      <li><a href="http://php.net/manual/fr/function.htmlentities.php"><code class="highlighter-rouge">htmlentities()</code></a></li>
      <li><a href="http://www.php.net/manual/fr/function.htmlspecialchars.php"><code class="highlighter-rouge">htmlspecialchars()</code></a></li>
    </ul>
  </li>
  <li><a href="http://blog.loftdigital.com/blog/php-utf-8-cheatsheet">PHP UTF-8 Cheatsheet</a>(en)</li>
  <li><a href="http://stackoverflow.com/questions/571694/what-factors-make-php-unicode-incompatible">Stack Overflow: What factors make PHP Unicode-incompatible?</a>(en)</li>
  <li><a href="http://stackoverflow.com/questions/140728/best-practices-in-php-and-mysql-with-international-strings">Stack Overflow: Best practices in PHP and MySQL with international strings</a>(en)</li>
  <li><a href="http://mathiasbynens.be/notes/mysql-utf8mb4">How to support full Unicode in MySQL databases</a>(en)</li>
  <li><a href="http://www.sitepoint.com/bringing-unicode-to-php-with-portable-utf8/">Bringing Unicode to PHP with Portable UTF-8</a>(en)</li>
</ul>

</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="dependency_injection">
    <h1 id="dependency_injection_title">Injection de dépendance</h1>

<p>De <a href="http://fr.wikipedia.org/wiki/Injection_de_d%C3%A9pendances">Wikipedia</a>:</p>

<blockquote>
  <p>L’injection de dépendances est un mécanisme qui permet d’implanter le principe de l’inversion de contrôle. 
Il consiste à créer dynamiquement (injecter) les dépendances entre les différentes classes en s’appuyant 
sur une description (fichier de configuration ou métadonnées) ou de manière programmatique. 
Ainsi les dépendances entre composants logiciels ne sont plus exprimées dans le code de manière statique 
mais déterminées dynamiquement à l’exécution.</p>
</blockquote>

<p>Cette citation rend le concept plus compliqué qu’il n’y paraît. L’injection de dépendances fournit un composant avec 
ses dépendances que ce soit via un constructeur, des appels de méthodes ou la configuration de propriétés. C’est tout.</p>

</section>


<section class="chapter" id="basic_concept">
    <h2 id="basic_concept_title">Concepts de base</h2>

<p>Nous pouvons démontrer le concept avec un exemple tout bête.</p>

<p>Imaginons que nous ayons une classe <code class="highlighter-rouge">Database</code> qui exige un adaptateur (<em>adapter</em> en anglais) pour communiquer avec la 
base de données. Nous instantions l’adaptateur à l’intérieur du constructeur et créons une dépendance forte. Cela 
rend les tests compliqués étant donné que la classe <code class="highlighter-rouge">Database</code> est fortement couplée à l’adaptateur.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Database</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Database</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$adapter</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adapter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MySqlAdapter</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">MysqlAdapter</span> <span class="p">{}</span></code></pre></figure>

<p>Ce code peut être refactorisé pour utiliser l’injection de dépendances et ainsi séparer l’adaptateur de la classe.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Database</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Database</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$adapter</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nx">MySqlAdapter</span> <span class="nv">$adapter</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adapter</span> <span class="o">=</span> <span class="nv">$adapter</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">MysqlAdapter</span> <span class="p">{}</span></code></pre></figure>

<p>Maintenant nous fournissons à la classe <code class="highlighter-rouge">Database</code> les dépendances nécessaires en argument au lieu de les créer nous-mêmes. 
Nous pouvons même créer une méthode qui accepterait les paramètres des dépendances afin de les fixer nous-mêmes, 
ou si la propriété <code class="highlighter-rouge">$adapter</code> était <code class="highlighter-rouge">public</code>, nous pourrions la définir directement.</p>

</section>


<section class="chapter" id="complex_problem">
    <h2 id="complex_problem_title">Problèmes complexes</h2>

<p>Si vous avez déjà lu des articles sur l’injection de dépendances alors vous avez probablement vu des termes comme 
<em>“Inversion de contrôle”</em> ou <em>“Principe d’inversion de dépendances”</em>. Ces termes sont les problèmes complexes que 
l’injection de dépendances cherche à résoudre.</p>

<h3 id="inversion-de-contrôle">Inversion de contrôle</h3>

<p>L’inversion de contrôle est, comme il le sous-entend, un système cherchant à “inverser le contrôle” en gardant le contrôle 
organisationnel entièrement séparé des objets. En terme d’injection de dépendances, cela signifie que l’on sépare les 
dépendances en les contrôlant et en les instanciant ailleurs dans le système.</p>

<p>Pendant des années, les frameworks PHP ont fait de l’inversion de contrôle, cependant la question est devenue : quelle 
partie du contrôle doit-on inverser ? Et vers où ? Par exemple, les frameworks MVC fourniront généralement un super-objet
ou un contrôleur de base dont les autres contrôleurs doivent hériter pour avoir accès à ses dépendances. C’est 
<strong>ça</strong> l’inversion de contrôle, cependant au lieu de séparer les différentes dépendances, cette méthode ne fait que les 
déplacer.</p>

<p>L’injection de dépendances nous permet de résoudre ce problème de façon plus élégante en injectant uniquement les dépendances 
dont nous avons besoin, quand nous avons besoin et ce sans avoir à écrire en dur quelque dépendance que ce soit.</p>

<h3 id="principe-dinversion-des-dépendances">Principe d’inversion des dépendances</h3>

<p>Le principe d’inversion des dépendances (en anglais <em>Dependency Inversion Principle</em>) correspond au “D” dans “S.O.L.I.D.” 
qui est un ensemble de principes et de conceptions orientés objet. Il est dit que l’on doit <em>“dépendre des abstactions et 
non des implémentations.”</em>. Cela signifie que nos dépendances doivent se faire sur des interfaces/contrats ou encore sur 
des classes abstraites plutôt que sur des classes “concrètes”. Nous pouvons facilement refactoriser l’exemple ci-dessus 
en suivant ce principe.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Database</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Database</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$adapter</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nx">AdapterInterface</span> <span class="nv">$adapter</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adapter</span> <span class="o">=</span> <span class="nv">$adapter</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">interface</span> <span class="nx">AdapterInterface</span> <span class="p">{}</span>

<span class="k">class</span> <span class="nc">MysqlAdapter</span> <span class="k">implements</span> <span class="nx">AdapterInterface</span> <span class="p">{}</span></code></pre></figure>

<p>Il y a plusieurs avantages à ce que la classe <code class="highlighter-rouge">Database</code> dépende d’une interface plutôt que de son implémentation.</p>

<p>Imaginons que vous êtes en train de travailler dans une équipe et que l’adaptateur est écrit par un de vos collègues. 
Dans notre premier exemple, nous aurions d’abord attendu que notre collègue ait fini l’adaptateur avant de pouvoir 
l’utiliser dans nos tests unitaires. Maintenant que la dépendance correspond à une interface, nous pouvons créer un 
objet factice implémentant cette interface en sachant que notre collègue constuira l’adaptateur en respectant le contrat 
de base.</p>

<p>Un bénéfice encore plus grand de cette méthode est que notre code est maintenant plus facilement évolutif (<em>scalable</em> en anglais). 
Si dans un an nous décidons que nous voulons migrer sur un autre type de base de données alors nous n’avons qu’à écrire et 
utiliser l’adaptateur qui implémente l’interface spécifique et ainsi, nous n’avons plus besoin de refactoriser du code.</p>

</section>


<section class="chapter" id="containers">
    <h2 id="containers_title">Conteneurs</h2>

<p>La première chose que vous devriez comprendre sur les conteneurs d’injection de dépendances est qu’il ne s’agit pas de 
la même chose que l’injection de dépendances. Un conteneur est un moyen pratique d’implémenter l’injection de dépendances, 
cependant ils peuvent être souvent mal utilisés et devenir un anti-pattern. Injecter un composant ID en tant que 
localisateur de services à l’intérieur de vos classes crée sans aucun doute une dépendance plus forte que la dépendance 
que vous remplacez. Cela rend aussi votre code moins transparent et finalement plus dur à tester.</p>

<p>La plupart des frameworks modernes ont leur propre conteneur d’injection de dépendances qui permettent de brancher 
vos dépendances ensemble à travers un fichier de configuration. Cela signifie en pratique que vous écrivez du code métier 
aussi propre et découplé que le framework sur lequel vous vous basez.</p>

</section>


<section class="chapter" id="dependency_injection_further_reading">
    <h2 id="dependency_injection_further_reading_title">Lecture approfondie</h2>

<p>Attention, les liens qui suivent sont tous en anglais :</p>

<ul>
  <li><a href="http://ralphschindler.com/2011/05/18/learning-about-dependency-injection-and-php">En apprendre plus sur l’injection de dépendances et PHP</a></li>
  <li><a href="http://fabien.potencier.org/article/11/what-is-dependency-injection">Qu’est-ce que l’injection de dépendances ?</a></li>
  <li><a href="http://mwop.net/blog/260-Dependency-Injection-An-analogy.html">Injection de dépendances : une analogie</a></li>
  <li><a href="http://net.tutsplus.com/tutorials/php/dependency-injection-huh/">Injection de dépendances : Hein?</a></li>
  <li><a href="http://www.happyaccidents.me/dependency-injection-as-a-tool-for-testing/">Injection de dépendances en tant qu’outil de test</a></li>
</ul>

</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="databases">
    <h1 id="databases_title">Bases de données</h1>

<p>Votre code PHP va souvent faire appel aux bases de données pour préserver l’information. Vous avez un certain nombre 
d’options pour vous connecter et interagir avec votre base de données. L’option recommandée <em>avant PHP 5.1.0</em> était 
d’utiliser les pilotes natifs tels que <a href="http://php.net/mysql">mysql</a>, <a href="http://php.net/mysqli">mysqli</a>, <a href="http://php.net/pgsql">pgsql</a>, etc.</p>

<p>Les pilotes natifs sont géniaux si vous n’utilisez qu’un seul type de base de données dans votre application mais si, 
par exemple, vous utilisez MySQL et un peu de MSSQL, ou vous avez besoin de vous connecter à une base Oracle alors vous 
ne pourrez pas utiliser les mêmes pilotes. Vous aurez besoin d’apprendre une nouvelle API pour chaque type de BDD — ce 
qui peut devenir lourd.</p>


</section>


<section class="chapter" id="mysql_extension">
    <h2 id="mysql_extension_title">Extension MySQL</h2>

<p>L’extension <a href="http://php.net/mysql">mysql</a> pour PHP est aujourd’hui au point mort et est <a href="http://php.net/manual/fr/migration55.deprecated.php">officiellement dépréciée depuis PHP 5.5.0</a> ce qui
signifie qu’elle sera retirée dans les prochaines versions. Si vous utilisez n’importe quelle fonction commençant par 
<code class="highlighter-rouge">mysql_*</code> (comme <code class="highlighter-rouge">mysql_connect()</code>) dans votre application alors cela donnera des erreurs dans votre code. Vous serez 
donc obligé de faire la transition vers <a href="http://php.net/mysqli">mysqli</a> ou <a href="http://php.net/pdo">PDO</a>.</p>

<p><strong>Si vous venez de commencer votre projet alors n’utilisez surtout pas l’extension <a href="http://php.net/mysql">mysql</a> mais préférez <a href="http://php.net/mysqli">mysqli</a> ou PDO</strong></p>

<ul>
  <li><a href="http://php.net/manual/fr/mysqlinfo.api.choosing.php">PHP: Choisir une API pour MySQL</a></li>
  <li><a href="http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers">Tutoriel sur PDO pour les développeurs MySQL</a></li>
</ul>


</section>


<section class="chapter" id="pdo_extension">
    <h2 id="pdo_extension_title">Extension PDO</h2>

<p>PDO est une couche d’abstraction pour se connecter à une base de données — intégrée à PHP depuis la version 5.1.0 — 
qui fournit une interface commune pour communiquer avec différentes bases de données. PDO ne va pas traduire vos requêtes 
SQL ou émuler les fonctionnalités manquantes; il ne gère que la connexion entre différents types de bases de données avec 
la même API.</p>

<p>Plus important encore, PDO vous permet d’injecter en toute sécurité des entrées étrangères (par ex., les identifiants) 
dans vos requêtes SQL sans que vous ayez à vous soucier des attaques par injection SQL. Cela est rendu possible grâce à 
l’utilisation des fonctions de PDO et des paramètres liés.</p>

<p>Supposons qu’un script PHP reçoit un identifiant numérique en tant que paramètre d’entrée. Cet ID devrait être utilisé 
pour récupérer les enregistrements d’un utilisateur dans la base de données. Voici la mauvaise façon de s’y prendre :</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">'sqlite:users.db'</span><span class="p">);</span>
<span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">"SELECT name FROM users WHERE id = "</span> <span class="o">.</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]);</span> <span class="o">//</span> <span class="o">&lt;--</span> <span class="nx">NON</span><span class="o">!</span></code></pre></figure>

<p>Ce code est mauvais. Vous insérez un paramètre en brut directement dans une requête SQL. C’est la porte ouverte pour 
le piratage comme <a href="http://wiki.hashphp.org/Validation">l’injection SQL</a>. Imaginez un instant que si un pirate envoie un paramètre <code class="highlighter-rouge">id</code> en invoquant l’URL 
<code class="highlighter-rouge">http://domain.com/?id=1%3BDELETE+FROM+users</code>. Cela va définir la variable <code class="highlighter-rouge">$_GET['id']</code> à <code class="highlighter-rouge">1;DELETE FROM users</code> ce qui 
va effacer l’ensemble de vos utilisateurs ! Au lieu de faire ça, vous devriez nettoyer les entrées en utilisant la liaison 
des paramètres avec PDO.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">'sqlite:users.db'</span><span class="p">);</span>
<span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'SELECT name FROM users WHERE id = :id'</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindParam</span><span class="p">(</span><span class="s1">':id'</span><span class="p">,</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'id'</span><span class="p">],</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span> <span class="c1">// &lt;-- Nettoyé automatiquement par PDO
</span><span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span></code></pre></figure>

<p>Voici le code correct. Il utilise un paramètre lié à une expression PDO. Cela “échappe” les entrées étrangères avant 
qu’elles ne soient introduites dans la base de données, ce qui empêche les attaques potentielles par injection SQL.</p>

<ul>
  <li><a href="http://www.php.net/manual/fr/book.pdo.php">En savoir plus sur PDO</a></li>
</ul>

<p>Vous devriez savoir que les connexions à la base de données utilisent pas mal de ressources et il arrivait souvent 
que les ressources finissaient par tarir si les connexions n’étaient pas implicitement fermées. Cependant c’était plus 
souvent le cas dans les autres langages. En utilisant PDO, vous pouvez implicitement fermer la connexion en détruisant 
l’objet et en s’assurant que toutes les références à cet objet ont été supprimées, c’est-à-dire, mises à NULL. Si vous 
ne le faites pas explicitement, PHP va automatiquement fermer la connexion quand votre script s’arrêtera - à moins bien 
sûr que vous n’utilisiez une connexion persistante.</p>

<ul>
  <li><a href="http://php.net/manual/fr/pdo.connections.php">En savoir plus sur les connexions avec PDO</a></li>
</ul>

<h2 id="couches-dabstractions">Couches d’abstractions</h2>

<p>Beaucoup de frameworks fournissent leur propre couche d’abstraction qui peut être ou non basée sur PDO. Cette couche va 
souvent émuler les fonctionnalités d’une base de données qui seraient manquantes dans une autre base en enveloppant 
vos requêtes dans des méthodes PHP vous donnant ainsi une réelle abstraction avec la base de données.
Cela engendre évidemment un léger surplus mais si vous voulez développer une application portable ayant besoin de 
communiquer avec MySQL, PostgreSQL et SQLite alors ce petit surplus en vaudra la peine par souci de propreté et de 
maintenance du code.</p>

<p>Plusieurs couches d’abstractions ont été construites en utilisant les standards d’espace de noms <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">PSR-0</a> ou 
<a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md">PSR-4</a>; elles peuvent donc être installées dans n’importe quelle application qui vous plaira :</p>

<ul>
  <li><a href="https://github.com/auraphp/Aura.Sql">Aura SQL</a></li>
  <li><a href="http://www.doctrine-project.org/projects/dbal.html">Doctrine2 DBAL</a></li>
  <li><a href="http://propelorm.org/Propel/">Propel</a></li>
  <li><a href="http://packages.zendframework.com/docs/latest/manual/fr/index.html#zend-db">ZF2 Db</a></li>
  <li><a href="http://framework.zend.com/manual/fr/zend.db.html">ZF1 Db</a></li>
</ul>


</section>


<section class="chapter" id="interacting_via_code">
    <h2 id="interacting_via_code_title">Interagir avec les bases de données</h2>

<p>Quand les développeurs commencent à utiliser PHP, ils finissent souvent par mélanger le code métier avec celui gérant 
la base de données et l’affichage, ce qui donne quelque chose de ce genre :</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nt">&lt;ul&gt;</span>
<span class="cp">&lt;?php</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">'SELECT * FROM table'</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;li&gt;"</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'field1'</span><span class="p">]</span><span class="o">.</span><span class="s2">" - "</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'field1'</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;/li&gt;"</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;/</span><span class="nx">ul</span><span class="o">&gt;</span></code></pre></figure>

<p>Ceci est une mauvaise pratique pour toutes sortes de raisons, principalement dû au fait que le code est plus difficile à 
déboguer et à lire et qu’il est plus difficile de réaliser des tests.</p>

<p>Bien qu’il existe un certain nombre de solutions pour parer à ce problème comme l’utilisation de la <a href="#programmation_oriente_objet">POO</a> 
ou bien la <a href="#programmation_fonctionnelle">programmation fonctionnelle</a>, les parties logiques de votre code doivent être 
clairement délimitées.</p>

<p>Considérez l’exemple suivant :</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">getAllFoos</span><span class="p">(</span><span class="nv">$db</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">'SELECT * FROM table'</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nx">getAllFoos</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;li&gt;"</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'field1'</span><span class="p">]</span><span class="o">.</span><span class="s2">" - "</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'field1'</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;/li&gt;"</span><span class="p">;</span> <span class="c1">// MAUVAIS!!
</span><span class="p">}</span></code></pre></figure>

<p>C’est un bon début. La séparation entre l’interaction avec la base de données et l’affichage est déjà bien distincte.</p>

<p>Créez une classe où vous placerez les méthodes de votre code métier (votre “modèle”). Puis créez un fichier <code class="highlighter-rouge">.php</code> 
qui contient la logique d’affichage (votre “vue”) ce qui revient grosso-modo à utiliser le pattern <a href="http://code.tutsplus.com/tutorials/mvc-for-noobs--net-10488 (en)">MVC</a> - un modèle 
d’architecture très courant dans la plupart des <a href="#frameworks_title">frameworks</a>.</p>

<p><strong>foo.php</strong></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="nv">$db</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">'mysql:host=localhost;dbname=testdb;charset=utf8'</span><span class="p">,</span> <span class="s1">'username'</span><span class="p">,</span> <span class="s1">'password'</span><span class="p">);</span>

<span class="c1">// Rendre votre modèle accessible
</span><span class="k">include</span> <span class="s1">'models/FooModel.php'</span><span class="p">;</span>

<span class="c1">// Création d'une instance
</span><span class="nv">$fooList</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FooModel</span><span class="p">(</span><span class="nv">$db</span><span class="p">);</span>

<span class="c1">// Affichage du résultat
</span><span class="k">include</span> <span class="s1">'views/foo-list.php'</span><span class="p">;</span></code></pre></figure>

<p><strong>models/FooModel.php</strong></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$db</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nx">PDO</span> <span class="nv">$db</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span> <span class="o">=</span> <span class="nv">$db</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getAllFoos</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">'SELECT * FROM table'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p><strong>views/foo-list.php</strong></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$fooList</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'field1'</span><span class="p">]</span> <span class="cp">?&gt;</span> - <span class="cp">&lt;?=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'field1'</span><span class="p">]</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?</span> <span class="k">endforeach</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>C’est l’essentiel de ce que font les frameworks de façon plus manuelle. Vous n’avez pas forcément besoin de l’utiliser 
constamment mais mélanger la présentation et la logique métier peut être un réel casse-tête si vous devez ensuite 
utiliser les <a href="/#unit-testing">tests unitaires</a> dans votre application.</p>

<p><a href="http://phpbridge.org/ (en)">PHPBridge</a> contient un excellent tutoriel appellé <a href="http://phpbridge.org/intro-to-php/creating_a_data_class (en)">Creating a Data Class</a> qui couvre un sujet similaire à celui-ci et 
permet de bien s’imprégner du concept d’interaction avec les bases de données.</p>


</section>


<section class="chapter" id="databases_abstraction_layers">
    <h2 id="databases_abstraction_layers_title">Couches d’abstraction</h2>

<p>Pratiquement tous les frameworks contiennent leurs propres couches d’abstraction qui peut ou non se baser sur <a href="http://php.net/book.pdo">PDO</a>. Il simule la plupart du temps les caractéristiques manquantes d’un système à l’autre en englobant vos requêtes dans des méthodes PHP vous donnant une réelle abstraction des données contrairement à PDO qui ne vous fournit que la partie connexion.
Cela rajoute évidemment une surcouche mais si vous devez construire une application portable qui nécessite de travailler à la fois avec MySQL, PostgreSQL et/ou SQLite alors ce petit surplus ne sera pas de trop afin d’avoir un code plus maintenable.</p>

<p>Certains couches d’abstraction ont été construites en utilisant la norme <a href="http://www.php-fig.org/psr/psr-0/">PSR-0</a> ou <a href="http://www.php-fig.org/psr/psr-4/">PSR-4</a> afin d’être utilisable par n’importe quelle application:</p>

<ul>
  <li><a href="https://github.com/auraphp/Aura.Sql">Aura SQL</a></li>
  <li><a href="http://www.doctrine-project.org/projects/dbal.html">Doctrine2 DBAL</a></li>
  <li><a href="http://propelorm.org/">Propel</a></li>
  <li><a href="https://packages.zendframework.com/docs/latest/manual/en/index.html#zendframework/zend-db">Zend-db</a></li>
</ul>


</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="templating">
    <h1 id="templating_title">Templating</h1>

<p>Les templates fournissent un moyen pratique de séparer les différentes préoccupations (contrôleur, logique, présentation). 
Les templates contiennent typiquement l’HTML de votre application mais ils peuvent aussi être utilisés avec d’autres 
formats comme l’XML. Les templates sont souvent classés dans la catégorie “vues”, le second composant du pattern <a href="pages/Design-Patterns.html#modlevuecontrleur">MVC</a>.</p>

</section>


<section class="chapter" id="templating_benefits">
    <h2 id="templating_benefits_title">Bénéfices</h2>

<p>L’intérêt principal d’utiliser les templates tient dans la séparation nette qui se créée entre la logique de présentation 
et le reste de l’application. Les templates sont seuls responsables de l’affichage du contenu formaté. Ils ne sont pas 
responsables de la récupération des données, ni de la persistance ou d’autres tâches complexes. Cela conduit à du code 
plus propre et plus lisible, ce qui est particulièrement utile lorsque l’on travaille en équipe où l’on peut trouver 
à la fois des développeurs côté serveur (responsables de la partie “contrôleurs, modèles”) et les designers qui, eux, 
travaillent sur le code côté client.</p>

<p>Les templates améliorent aussi l’organisation du code pour l’affichage. Ils sont généralement placés dans un répertoire 
“views”, chacun étant défini dans un seul fichier. Cette approche encourage la réutilisation de code où de larges blocs 
de code sont découpés de façon à obtenir un ensemble de briques “atomiques” et utilisables plus facilement. Par exemple, 
l’en-tête et le pied de page de votre site peuvent être définis dans des templates qui seront par la suite inclus 
respectivement au début et à la fin de chaque template d’une page.</p>

<p>Finalement, selon la bibliothèque que vous utilisez, les templates peuvent vous offrir plus de sécurité en échappant 
par exemple automatiquement les variables définis par les entrées d’un utilisateur. Quelques bibliothèques vous offrent 
même la possibilité d’isoler les variables et les fonctions (on parlera de <em>sandboxing</em>) définis dans une liste blanche 
de façon, par exemple, à limiter les dégats collatéraux provoqués par une mauvaise utilisation faites par les designers.</p>

</section>


<section class="chapter" id="plain_php_templates">
    <h2 id="plain_php_templates_title">Templates en PHP “pur”</h2>

<p>Les templates “pur” PHP sont ceux qui n’utilisent que du code PHP natif. C’est un choix naturel étant donné que PHP est 
lui-même un language de templating. Ce terme signifie tout simplement que vous pouvez combiner du code PHP avec un autre 
langage comme l’HTML. Cela peut être considéré comme un atout du fait même que les développeurs n’ont pas à apprendre 
une syntaxe particulière. Par ailleurs, ces templates tendent à être plus rapides étant donné qu’il n’y a pas de phase de 
compilation.</p>

<p>Tous les frameworks PHP modernes utilisent un système de templating, la plupart se basant uniquement sur la syntaxe PHP. 
En dehors des frameworks, des bibliothèques comme <a href="http://platesphp.com/">Plates</a> ou <a href="https://github.com/auraphp/Aura.View">Aura.View</a> 
rendent le travail avec les templates en PHP “pur” plus facile en offrant des fonctionnalités “modernes” telles que 
l’héritage, le layout et des extensions.</p>

<p>Exemple d’un template en PHP “pur” (utilisant <a href="http://platesphp.com/">Plates</a>):</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span><span class="s1">'header'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Profil utilisateur'</span><span class="p">])</span> <span class="cp">?&gt;</span>

<span class="nt">&lt;h1&gt;</span>Profil utilisateur<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>Bonjour, <span class="cp">&lt;?=</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span><span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span><span class="s1">'footer'</span><span class="p">)</span> <span class="cp">?&gt;</span></code></pre></figure>


</section>


<section class="chapter" id="compiled_templates">
    <h2 id="compiled_templates_title">Templates compilés</h2>

<p>Bien que le PHP ait évolué en un langage orienté objet mature, il ne s’est 
<a href="http://fabien.potencier.org/article/34/templating-engines-in-php">pas énormément amélioré</a> en tant que langage de 
templating. Les templates compilés comme <a href="http://twig.sensiolabs.org/">Twig</a> ou <a href="http://www.smarty.net/">Smarty</a> 
remplissent ce vide en offrant une nouvelle syntaxe, adaptée aux exigences des applications modernes. Cela va de 
l’échappement automatique à l’héritage en passant par des structures de contrôles simplifiées. Ces templates ont été 
conçus dans l’idée de faciliter l’écriture, la sécurité et la maintenance du code gérant la partie visuelle de l’application. 
Les templates compilés peuvent même être partagés entre différents langages, <a href="http://mustache.github.io/">Mustache</a> étant 
un bon exemple de cela. Étant donné que ces templates doivent être compilés, il y a une légère baisse de performances. 
Cependant, cela peut être anecdotique si un système de cache approprié est utilisé.</p>

<p>Exemple d’un template compilé (utilisant <a href="http://twig.sensiolabs.org/">Twig</a>):</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">{% include 'header.html' with {'title': 'Profil utilisateur'} %}

&lt;h1&gt;Profil utilisateur&lt;/h1&gt;
&lt;p&gt;Bonjour, {{ name }}&lt;/p&gt;

{% include 'footer.html' %}</code></pre></figure>


</section>


<section class="chapter" id="templating_further_reading">
    <h2 id="templating_further_reading_title">Aller plus loin</h2>

<h3 id="articles--tutoriels">Articles &amp; Tutoriels</h3>

<ul>
  <li><a href="http://fabien.potencier.org/article/34/templating-engines-in-php">Templating Engines in PHP</a></li>
  <li><a href="http://code.tutsplus.com/tutorials/an-introduction-to-views-templating-in-codeigniter--net-25648">An Introduction to Views &amp; Templating in CodeIgniter</a></li>
  <li><a href="http://www.smashingmagazine.com/2011/10/17/getting-started-with-php-templating/">Getting Started With PHP Templating</a></li>
  <li><a href="http://code.tutsplus.com/tutorials/roll-your-own-templating-system-in-php--net-16596">Roll Your Own Templating System in PHP</a></li>
  <li><a href="https://laracasts.com/series/laravel-from-scratch/episodes/7">Master Pages</a></li>
  <li><a href="http://code.tutsplus.com/tutorials/working-with-templates-in-symfony-2--cms-21172">Working With Templates in Symfony 2</a></li>
</ul>

<h3 id="bibliothèques">Bibliothèques</h3>

<ul>
  <li><a href="https://github.com/auraphp/Aura.View">Aura.View</a> <em>(native)</em></li>
  <li><a href="http://laravel.com/docs/templates">Blade</a> <em>(compilée, spécifique au framework)</em></li>
  <li><a href="http://dwoo.org/">Dwoo</a> <em>(compilée)</em></li>
  <li><a href="https://github.com/nette/latte">Latte</a> <em>(compilée)</em></li>
  <li><a href="https://github.com/bobthecow/mustache.php">Mustache</a> <em>(compilée)</em></li>
  <li><a href="http://phptal.org/">PHPTAL</a> <em>(compilée)</em></li>
  <li><a href="http://platesphp.com/">Plates</a> <em>(native)</em></li>
  <li><a href="http://www.smarty.net/">Smarty</a> <em>(compilée)</em></li>
  <li><a href="http://twig.sensiolabs.org/">Twig</a> <em>(compilée)</em></li>
  <li><a href="http://framework.zend.com/manual/2.3/en/modules/zend.view.quick-start.html">Zend\View</a> <em>(native, spécifique au framework)</em></li>
</ul>

</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="errors_and_exceptions">
    <h1 id="errors_and_exceptions_title">Les erreurs et exceptions</h1>


</section>


<section class="chapter" id="errors">
    <h2 id="errors_title">Erreurs</h2>

<p>Le PHP a plusieurs niveaux de gravité pour les erreurs. Les 3 types de messages d’erreurs les plus communs sont les 
erreurs, les avertissements et les remarques. Il existe différents niveaux de gravité; 
<code class="highlighter-rouge">E_ERROR</code>, <code class="highlighter-rouge">E_WARNING</code> et <code class="highlighter-rouge">E_NOTICE</code>. Les erreurs sont des erreurs d’exécution fatales et sont souvent causées par 
des bogues qui ont besoin d’être réglés étant donné qu’ils stoppent l’interprétation du reste du code. Les 
avertissements sont des erreurs non fatales, autrement dit l’exécution du script continuera. Les remarques sont des 
messages informatifs sur du code qui pourrait poser problème lors de l’exécution du script, cependant l’exécution ne 
sera pas arrêtée.</p>

<p>Il existe un autre type de message d’erreur qui se présente lors de la phase de compilation; c’est le message <code class="highlighter-rouge">E_STRICT</code>. 
Ces messages sont utilisés pour suggérer des changements dans votre code afin de s’assurer de la meilleure 
interopérabilité et de la meilleure compatibilité ascendante possible.</p>

<ul>
  <li><a href="http://www.php.net/manual/fr/errorfunc.constants.php">Constantes prédéfinies pour la gestion des erreurs</a></li>
</ul>

</section>


<section class="chapter" id="exceptions">
    <h2 id="exceptions_title">Exceptions</h2>

<p>Les exceptions sont une partie standardisée dans la plupart des langages de programmation populaire mais elles sont 
souvent négligées par les programmeurs PHP. Les langages comme Ruby sont très fortement équipés pour gérer les exceptions.
Ainsi, à chaque fois qu’une chose se passe mal comme l’échec d’une requête HTTP ou d’une requête à la BDD, Ruby (ou les 
“gems” utilisées) va lancer une exception à l’écran vous indiquant immédiatement qu’il y a eu une erreur.</p>

<p>Le PHP en lui-même est plutôt laxiste avec ce type d’erreur, ainsi un appel à <code class="highlighter-rouge">file_get_contents()</code> va généralement 
renvoyer un <code class="highlighter-rouge">FALSE</code> accompagné d’un avertissement. Beaucoup d’anciens frameworks PHP comme CodeIgniter vont juste 
retourner <code class="highlighter-rouge">false</code>, enregistrer un message dans leur fichier de log et peut-être vous laisser utiliser une méthode 
comme <code class="highlighter-rouge">$this-&gt;upload-&gt;get_error()</code> pour voir ce qu’il s’est mal passé. Le problème ici est que vous devez vous-même 
chercher l’erreur et vérifier dans la doc ce qu’elle signifie pour cette fonction au lieu de l’avoir rendu évidente à 
comprendre.</p>

<p>L’autre problème arrive lorsque les classes lancent automatiquement une erreur à l’écran et terminent le processus. Si 
vous faites cela, un autre développeur ne sera plus capable de gérer cette erreur à l’exécution. Les exceptions 
devraient être lancées afin d’avertir le développeur qu’une chose ne s’est pas passée comme prévu; ça devrait être à eux 
de décider comment ils veulent gérer cela, par exemple:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Fuel\Email</span><span class="p">;</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">subject</span><span class="p">(</span><span class="s1">'Mon sujet'</span><span class="p">);</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">body</span><span class="p">(</span><span class="s1">'Comment allez-vous ?'</span><span class="p">);</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="s1">'guy@exemple.com'</span><span class="p">,</span> <span class="s1">'Un gars'</span><span class="p">);</span>

<span class="k">try</span>
<span class="p">{</span>
    <span class="nv">$email</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">catch</span><span class="p">(</span><span class="nx">Fuel\Email\ValidationFailedException</span> <span class="nv">$e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// La validation a échoué
</span><span class="p">}</span>
<span class="k">catch</span><span class="p">(</span><span class="nx">Fuel\Email\SendingFailedException</span> <span class="nv">$e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Le pilote ne peut pas envoyé l'email
</span><span class="p">}</span>
<span class="nx">finally</span>
<span class="p">{</span>
    <span class="c1">// ce bloc est exécuté même si une exception a été levée et avant que l'exécution normale reprenne
</span><span class="p">}</span></code></pre></figure>

<h3 id="les-exceptions-spl">Les exceptions SPL</h3>

<p>La classe générique <code class="highlighter-rouge">Exception</code> ne fournit pas un contexte intéressant pour le déboguage. Pour remédier à cela, il est 
possible de créer une sous-classe du type générique <code class="highlighter-rouge">Exception</code> :</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">ValidationException</span> <span class="k">extends</span> <span class="nx">Exception</span> <span class="p">{}</span></code></pre></figure>

<p>Cela vous permet d’ajouter plusieurs blocs <code class="highlighter-rouge">catch</code> et de gérer les exceptions différemment. Cela peut conduire à la 
création de <em>beaucoup</em> de classes personnalisées qui aurait pu être évitées si les exceptions de la SPL avaient 
été utilisées avec l’<a href="#bibliothèque_php_standard">extension SPL</a>.</p>

<p>Si par exemple vous utilisez la méthode magique <code class="highlighter-rouge">__call()</code> et qu’une méthode invalide est demandée alors, au lieu de lever 
une exception standard vague ou d’utiliser une sous-classe personnalisée, vous pourriez tout simplement faire 
<code class="highlighter-rouge">throw new BadFunctionCallException;</code>.</p>

<ul>
  <li><a href="http://php.net/manual/fr/language.exceptions.php">En savoir plus sur les exceptions</a></li>
  <li><a href="http://php.net/manual/fr/spl.exceptions.php">En savoir plus sur les exceptions de la SPL</a></li>
  <li><a href="http://www.brandonsavage.net/exceptional-php-nesting-exceptions-in-php/">Les exceptions imbriquées en PHP</a></li>
  <li><a href="http://ralphschindler.com/2010/09/15/exception-best-practices-in-php-5-3">Les meilleurs pratiques de gestion d’exception en PHP 5.3</a></li>
</ul>


</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="security">
    <h1 id="security_title">Sécurité</h1>

</section>


<section class="chapter" id="web_application_security">
    <h2 id="web_application_security_title">La sécurité dans une application web</h2>

<p>De nombreuses personnes mal intentionnées tenteront d’exploiter les possibles failles dans votre application web. 
Il est important que vous ayez conscience de cela et que vous preniez les précautions nécessaires afin de renforcer 
la sécurité dans votre application. Heureusement, les gens du projet <a href="https://www.owasp.org/">“Open Web Application Security”</a> 
(OWASP en anglais) ont compilé une liste exhaustive des principaux problèmes de sécurité connus et les méthodes pour 
vous en prémunir. C’est une lecture indispensable pour tout développeur consciencieux de la sécurité.</p>

<ul>
  <li><a href="https://www.owasp.org/index.php/Guide_Table_of_Contents">Lire le guide de sécurité OWASP</a></li>
</ul>


</section>


<section class="chapter" id="password_hashing">
    <h2 id="password_hashing_title">Hachage de mots de passe</h2>

<p>Pratiquement tout le monde construit une application PHP qui se base sur une authentification de l’utilisateur. Les 
identifiants et les mots de passe sont stockés dans une base de données et utilisés plus tard pour authentifier les 
utilisateurs.</p>

<p>Il est important que vous utilisiez correctement les fonctions de <a href="http://fr.wikipedia.org/wiki/Fonction_de_hachage_cryptographique">hachage</a> avant de les stocker. Le hachage de 
mots de passe est une opération irréversible produisant une chaîne de caractères de longueur fixe. Cela signifie que 
vous pouvez comparer le produit d’une fonction de hachage avec le hash stocké en base de données pour déterminer s’il 
s’agit du même texte. Si les mots de passe stockés en base de données ne sont pas “hachés” alors n’importe qui ayant 
accès à cette base peut compromettre les comptes utilisateurs. Il arrive souvent que les utilisateurs utilisent le 
même mot de passe pour d’autres services. C’est pourquoi il faut prendre la sécurité des informations avec sérieux.</p>

<p><strong>Hachage de mot de passe avec <code class="highlighter-rouge">password_hash</code></strong></p>

<p>La fonction <code class="highlighter-rouge">password_hash</code> a été introduite avec la version 5.5 de PHP. À l’heure actuelle, elle utilise BCrypt qui est 
l’algorithme le plus robuste. Cela va être mis à jour dans le futur afin de supporter plus d’algorithmes. La 
bibliothèque <code class="highlighter-rouge">password_compat</code> a été créée afin de fournir une compatibilité ascendante avec PHP &gt;= 5.3.7.</p>

<p>Dans l’exemple ci-dessous, nous hachons une chaîne de caractères et faisons une vérification sur une chaîne différente. 
Étant donné que les 2 chaînes sont différentes (‘secret-password’ vs. ‘bad-password’), l’authentification va échouer.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
                      
<span class="k">require</span> <span class="s1">'password.php'</span><span class="p">;</span>

<span class="nv">$passwordHash</span> <span class="o">=</span> <span class="nb">password_hash</span><span class="p">(</span><span class="s1">'secret-password'</span><span class="p">,</span> <span class="nx">PASSWORD_DEFAULT</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">password_verify</span><span class="p">(</span><span class="s1">'bad-password'</span><span class="p">,</span> <span class="nv">$passwordHash</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// Mot de passe correct
</span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Mauvais mot de passe
</span><span class="p">}</span></code></pre></figure>

<ul>
  <li><a href="http://us2.php.net/manual/fr/function.password-hash.php">En savoir plus sur <code class="highlighter-rouge">password_hash</code></a></li>
  <li><a href="https://github.com/ircmaxell/password_compat"><code class="highlighter-rouge">password_compat</code> pour PHP  &gt;= 5.3.7 &amp;&amp; &lt; 5.5</a></li>
  <li><a href="http://fr.wikipedia.org/wiki/Fonction_de_hachage_cryptographique">En savoir plus sur les fonctions de hachage (cryptographie)</a></li>
  <li><a href="https://wiki.php.net/rfc/password_hash">PHP <code class="highlighter-rouge">password_hash</code> RFC</a></li>
</ul>


</section>


<section class="chapter" id="data_filtering">
    <h2 id="data_filtering_title">Filtrage des données</h2>

<p>Une règle d’or: ne jamais faire confiance aux entrées extérieures dans votre code PHP. Prenez toujours soin de 
“nettoyer” et valider ces entrées avant de les utiliser dans le code. Les fonctions <code class="highlighter-rouge">filter_var</code> et <code class="highlighter-rouge">filter_input</code> 
peuvent nettoyer les entrées textuelles et valider les données comme les emails.</p>

<p>Les entrées étrangères viennent de n’importe où : les données de formulaire envoyées via <code class="highlighter-rouge">$_GET</code> ou <code class="highlighter-rouge">$_POST</code>, des valeurs 
dans la variable superglobale <code class="highlighter-rouge">$_SERVER</code> et le corps des requêtes HTTP via <code class="highlighter-rouge">fopen('php://input', 'r')</code>. N’oubliez pas, 
les entrées étrangères ne se limitent pas aux données envoyées par l’utilisateur. Les fichiers uploadés et téléchargés, 
les valeurs de session, les données des cookies et les données provenant de services tiers sont aussi des entrées 
étrangères.</p>

<p>Demandez-vous à chaque fois que vous traitez, affichez, concaténez ou incluez des données dans votre code si ces données 
ont été correctement filtrées et qu’elles peuvent être considérées comme sûres.</p>

<p>Les données peuvent être <em>filtrées</em> différemment selon le contexte. Par exemple, quand des données brutes sont envoyées 
en sortie vers la page HTML, elles peuvent exécuter du Javascript et de l’HTML. Cette technique est connue sous le nom de 
“Cross-Site Scripting” (XSS) et peut se révéler très dangereuse. Une façon d’éviter les attaques XSS est de nettoyer 
toutes les données générées par l’utilisateur avant de les afficher sur votre page en retirant toutes balises HTML avec 
la fonction <code class="highlighter-rouge">strip_tags</code> ou en échappant les caractères spéciaux tels que ‘&lt;’ ou ‘&gt;’ avec les fonctions <code class="highlighter-rouge">htmlentities</code> ou 
<code class="highlighter-rouge">htmlspecialchars</code>.</p>

<p>Un autre exemple est lorsque l’on passe des options à exécuter en ligne de commandes. Cela peut être très dangereux 
(et est souvent une mauvaise idée) mais vous pouvez utiliser la fonction <code class="highlighter-rouge">escapeshellarg</code> pour nettoyer les arguments 
d’une commande.</p>

<p>Un dernier exemple concerne le fait d’autoriser les entrées étrangères pour déterminer le fichier à télécharger depuis 
le système de fichiers. Cela peut être exploité en changeant le chemin vers le fichier. Vous devez supprimer 
“/”, “../”, <a href="http://php.net/manual/fr/security.filesystem.nullbytes.php">les octets null</a> ou d’autres caractères du chemin de façon à empêcher le chargement de fichiers 
cachés, privés ou contenant des données sensibles.</p>

<ul>
  <li><a href="http://www.php.net/manual/fr/book.filter.php">En savoir plus sur le filtrage des données</a></li>
  <li><a href="http://php.net/manual/fr/function.filter-var.php">En savoir plus sur <code class="highlighter-rouge">filter_var</code></a></li>
  <li><a href="http://www.php.net/manual/fr/function.filter-input.php">En savoir plus sur <code class="highlighter-rouge">filter_input</code></a></li>
  <li><a href="http://php.net/manual/fr/security.filesystem.nullbytes.php">En savoir plus sur la gestion des octets null</a></li>
</ul>

<h3 id="nettoyage">Nettoyage</h3>

<p>Le “nettoyage” supprime (ou échappe) les caractères illégaux ou considérés comme dangereux.</p>

<p>Par exemple, vous devriez nettoyer les entrées étrangères avant d’inclure les entrées en HTML ou de les insérer 
dans une requête SQL. Si vous utilisez les paramètres liés avec <a href="#bases_de_données">PDO</a>, il nettoyera les entrées pour 
vous.</p>

<p>Parfois il est nécessaire d’autoriser certains tags HTML dans les entrées quand on les inclus dans la page HTML. Cela 
se révèle souvent très compliqué à mettre en oeuvre et beaucoup l’évite, c’est pourquoi il existe des syntaxes de 
formattage telles que Markdown or BBCode bien que des bibliothèques comme <a href="http://htmlpurifier.org/">HTML Purifier</a> vous permettent 
d’intégrer directement de l’HTML.</p>

<p><a href="http://www.php.net/manual/fr/filter.filters.sanitize.php">Voir les filtres de nettoyage</a></p>

<h3 id="validation">Validation</h3>

<p>La validation s’assure que les entrées extérieures correspondent à ce que vous vous attendiez. Par exemple, vous 
pourriez vouloir valider une adresse email, un numéro de téléphone ou un âge lors du traitement de l’enregistrement 
d’un compte.</p>

<p><a href="http://www.php.net/manual/fr/filter.filters.validate.php">Voir les filtres de validation</a></p>


</section>


<section class="chapter" id="configuration_files">
    <h2 id="configuration_files_title">Fichiers de configuration</h2>

<p>Lorsque vous créez des fichiers de configuration pour vos applications, les meilleurs pratiques recommandent que 
les méthodes ci-dessous soient suivies :</p>

<ul>
  <li>Il est recommandé que vous stockiez vos informations de configuration là où aucun utilisateur non autorisé ne peut y 
accéder (via le système de fichiers).</li>
  <li>Si vous devez stocker vos fichiers de configuration à la racine du projet, nommez les fichiers avec l’extension <code class="highlighter-rouge">.php</code>. 
Cela permet de s’assurer que même si le fichier est accédé directement il ne s’affichera pas en texte brut.</li>
  <li>Les informations contenues dans les fichiers de configuration doivent être protégées correctement, que ce soit via le 
chiffrage et/ou via le système de permissions des utilisateurs/groupes du système de fichiers.</li>
</ul>

</section>


<section class="chapter" id="register_globals">
    <h2 id="register_globals_title">Register Globals</h2>

<p>** NOTE: ** Depuis la version 5.4.0 de PHP, le paramètre <code class="highlighter-rouge">register_globals</code> a été retiré et ne peut plus être utilisé. 
Les applications plus anciennes n’afficheront plus qu’un avertissement si ce paramètre est utilisé.</p>

<p>Quand il est activé, le paramètre de configuration <code class="highlighter-rouge">register_globals</code> permet à plusieurs types de variables (cela inclus 
notamment les paramètres <code class="highlighter-rouge">$_POST</code>, <code class="highlighter-rouge">$_GET</code> and <code class="highlighter-rouge">$_REQUEST</code>) d’être accessibles partout dans votre application. Cela 
peut facilement conduire à des problèmes de sécurité étant donné que votre application ne peut de façon claire dire 
d’où proviennent les données.</p>

<p>Par exemple: <code class="highlighter-rouge">$_GET['foo']</code> sera accessible via <code class="highlighter-rouge">$foo</code> ce qui peut écraser des variables non encore déclarées. Si vous 
utilisez PHP &lt; 5.4.0 <strong>assurez vous</strong> que ce paramètre est à <strong>off</strong>.</p>

<ul>
  <li><a href="http://www.php.net/manual/fr/security.globals.php">Register_globals dans le manuel PHP</a></li>
</ul>

</section>


<section class="chapter" id="error_reporting">
    <h2 id="error_reporting_title">Rapport d’erreurs</h2>

<p>La journalisation des erreurs peut être utile pour repérer les points qui posent problème dans votre application mais 
cela permet aussi d’afficher des informations sur la structure de votre application au monde extérieur. Pour vous 
protéger efficacement contre ce genre de problèmes, vous avez besoin de configurer votre serveur différemment entre 
la version de développement et celle pour la production.</p>

<h3 id="développement">Développement</h3>

<p>Pour afficher toutes les erreurs possible durant le <strong>dévelopement</strong>, configurez les paramètres suivants 
dans votre fichier <code class="highlighter-rouge">php.ini</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>display_errors = On
display_startup_errors = On
error_reporting = -1
log_errors = On
</code></pre></div></div>

<blockquote>
  <p>En passant la valeur <code class="highlighter-rouge">-1</code>, toutes les erreurs possibles seront affichées, même lors de l’ajout d’autres niveaux et 
constantes dans les futures versions de PHP. La constante E_ALL fonctionne de la même façon depuis PHP 5.4. - 
<a href="http://php.net/manual/function.error-reporting.php">php.net</a></p>
</blockquote>

<p>Le niveau d’erreur <code class="highlighter-rouge">E_STRICT</code> a été introduit avec PHP 5.3.0 et ne fait pas parti de <code class="highlighter-rouge">E_ALL</code>, cependant il est 
dorénavant inclu dans <code class="highlighter-rouge">E_ALL</code> depuis la 5.4.0. Pour pouvoir rapporter toutes les erreurs en 5.3, il est donc nécessaire 
d’utiliser soit <code class="highlighter-rouge">-1</code> ou <code class="highlighter-rouge">E_ALL | E_STRICT</code>.</p>

<p><strong>Rapporter toutes les erreurs possibles par version PHP</strong></p>

<ul>
  <li>&lt; 5.3 <code class="highlighter-rouge">-1</code> ou <code class="highlighter-rouge">E_ALL</code></li>
  <li>  5.3 <code class="highlighter-rouge">-1</code> ou <code class="highlighter-rouge">E_ALL | E_STRICT</code></li>
  <li>&gt; 5.3 <code class="highlighter-rouge">-1</code> ou <code class="highlighter-rouge">E_ALL</code></li>
</ul>

<h3 id="production">Production</h3>

<p>Pour cacher l’affichage d’erreurs dans votre environnement de <strong>production</strong>, configurez votre fichier 
<code class="highlighter-rouge">php.ini</code> de cette façon:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>display_errors = Off
display_startup_errors = Off
error_reporting = E_ALL
log_errors = On
</code></pre></div></div>

<p>Avec ces paramètres, les erreurs seront toujours enregistrées dans les journaux d’erreurs de votre serveur web mais ne 
seront pas affichées à l’utilisateur. Pour plus d’informations sur ces paramètres, voir le manuel PHP:</p>

<ul>
  <li><a href="http://php.net/manual/errorfunc.configuration.php#ini.error-reporting">error_reporting</a></li>
  <li><a href="http://php.net/manual/errorfunc.configuration.php#ini.display-errors">display_errors</a></li>
  <li><a href="http://php.net/manual/errorfunc.configuration.php#ini.display-startup-errors">display_startup_errors</a></li>
  <li><a href="http://php.net/manual/errorfunc.configuration.php#ini.log-errors">log_errors</a></li>
</ul>

</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="testing">
    <h1 id="testing_title">Tests</h1>

<p>Écrire des tests automatisés pour votre code PHP est considéré comme une très bonne pratique et permet de construire 
des applications plus robustes. Les tests automatisés sont un excellent outil pour s’assurer que votre application 
fonctionne toujours (lorsque vous faites des changements ou quand vous ajoutez de nouvelles fonctionnalités) et ne 
devraient pas être ignorés.</p>

<p>Il existe différentes types d’outils de test (ou framework) disponibles pour PHP qui utilisent différentes approches - 
tous tentent d’éviter les tests manuels et le besoin d’un socle pour l’équipe chargée de faire l’assurance qualité (QA) 
, s’assurant ainsi que les récents changements ne viendront pas casser l’existant.</p>

</section>


<section class="chapter" id="test_driven_development">
    <h2 id="test_driven_development_title">Développement dirigé par les tests (TDD)</h2>

<p>Citation tirée de <a href="http://fr.wikipedia.org/wiki/Test_Driven_Development">Wikipedia</a>:</p>

<blockquote>
  <p>Le Test Driven Development (TDD) ou en français développement piloté par les tests est une technique de développement 
de logiciel qui préconise d’écrire les tests unitaires avant d’écrire le code source d’un logiciel.</p>
</blockquote>

<p>Il existe différents types de test que vous pouvez faire sur votre application.</p>

<h3 id="test-unitaire">Test unitaire</h3>

<p>Le test unitaire est une approche dans la programmation qui s’assure que les fonctions, les classes et les méthodes 
écrites fonctionnent comme prévu tout le long du cycle de développement. En vérifiant les valeurs en entrée et en sortie 
des différentes fonctions, vous vous assurez du bon fonctionnement de la logique interne. En utilisant l’injection de 
dépendances et en construisant des classes <a href="http://fr.wikipedia.org/wiki/Mock_%28programmation_orient%C3%A9e_objet%29">mocks</a> 
et des classes <a href="http://fr.wikipedia.org/wiki/Stub">stubs</a>, vous pouvez vérifier que les dépendances sont correctement 
utilisées pour une meilleure couverture du code.</p>

<p>Quand vous créez une classe ou une fonction, vous devriez aussi créer un test unitaire couvrant l’ensemble des états 
possibles. À un niveau très basique, vous devriez vous assurer que les changements effectués sur une fonction ou une 
classe ne modifieront pas le comportement attendu de l’application. La seule alternative pour les tests unitaires serait 
l’utilisation de la fonction <code class="highlighter-rouge">var_dump()</code> ce qui n’est pas viable que ce soit pour une petite ou une grande application.</p>

<p>L’autre cas d’utilisation des tests unitaires est la contribution à la communauté open-source. Vous pouvez ainsi 
écrire un test montrant une fonctionnalité boguée puis la réparer en montrant cette fois qu’elle passe le test. Les 
patches auront plus de chances d’être acceptés de cette manière. Si vous travaillez sur un projet acceptant les 
“pull requests” alors vous devriez exiger un (ou plusieurs) test(s) avant chaque patch.</p>

<p><a href="http://phpunit.de">PHPUnit</a> est le framework de test standard (de facto) pour écrire des tests unitaires pour des 
applications PHP mais il existe d’autres alternatives :</p>

<ul>
  <li><a href="https://github.com/atoum/atoum">atoum</a></li>
  <li><a href="https://github.com/Enhance-PHP/Enhance-PHP">Enhance PHP</a></li>
  <li><a href="http://punit.smf.me.uk/">PUnit</a></li>
  <li><a href="http://simpletest.org">SimpleTest</a></li>
</ul>

<h3 id="test-dintégration">Test d’intégration</h3>

<p>Citation tirée de <a href="http://fr.wikipedia.org/wiki/Test_d%27int%C3%A9gration">Wikipedia</a>:</p>

<blockquote>
  <p>Un test d’intégration est un test qui se déroule dans une phase d’un projet informatique suivant les tests unitaires. 
Il consiste, une fois que les développeurs ont chacun validé leurs développements ou leurs correctifs, 
à regrouper leurs modifications ensemble dans le cadre d’une livraison.</p>
</blockquote>

<p>Beaucoup des outils utilisés pour les tests unitaires peuvent aussi l’être pour les tests d’intégration étant donné 
qu’ils partagent les mêmes principes.</p>

<h3 id="test-fonctionnel">Test fonctionnel</h3>

<p>Les tests fonctionnels servent à vérifier que chaque fonction est correctement implémentée, c’est-à-dire conforme aux 
exigences et aux spécifications. On vérifie chaque fonction indépendamment les unes des autres, 
généralement en terme d’entrées/sorties.</p>

<p>Une autre variante connue est le test d’acceptation qui lui vérifie que le produit répond aux attentes de l’utilisateur, 
c’est-à-dire qu’il est conforme aux besoins et au cahier des charges. On vérifie le produit dans son ensemble, 
généralement avec des scenarii réalistes d’utilisation.</p>

<h4 id="outils-pour-les-tests-fonctionnels">Outils pour les tests fonctionnels</h4>

<ul>
  <li><a href="http://seleniumhq.com">Selenium</a></li>
  <li><a href="http://mink.behat.org">Mink</a></li>
  <li><a href="http://codeception.com">Codeception</a> est un framework de test complet incluant aussi des outils pour les tests d’acceptance</li>
  <li><a href="http://datasift.github.io/storyplayer">Storyplayer</a> est un framework de test complet qui inclue un support pour 
créer et détruire des environnements de test à la demande</li>
</ul>

</section>


<section class="chapter" id="behavior_driven_development">
    <h2 id="behavior_driven_development_title">Behavior Driven Development</h2>

<p>Il existe 2 types de développement orientés comportement (BDD en anglais) : SpecBDD et StoryBDD. SpecBDD se concentre sur les 
aspects techniques du code alors que StoryBDD lui se concentre sur la partie métier, les fonctionnalités apportées ou 
bien encore les interactions. Le PHP possède des frameworks pour ces types de BDD.</p>

<p>Avec StoryBDD, vous écrivez des histoires “humainement” lisibles qui décrivent le comportement de votre application. 
Ces histoires peuvent ensuite être transformées en tests se lançant sur votre application. Le framework utilisé dans 
les applications PHP pour StoryBDD est Behat qui s’inspire de <a href="http://cukes.info/">Cucumber</a> pour Ruby et implémente 
le language Gherkin DSL pour décrire les fonctionnalités.</p>

<p>Avec SpecBDD, vous écrivez des spécifications décrivant comment votre code devrait se comporter. Au lieu de tester 
une fonction ou une méthode, vous décrivez comment cette fonction ou méthode devrait s’exécuter. Pour atteindre ce but 
il existe un framework qui s’appelle PHPSpec. Ce framework s’inspire lui aussi d’un projet Ruby, 
<a href="http://rspec.info/">RSpec</a>.</p>

<h3 id="liens-sur-le-bdd">Liens sur le BDD</h3>

<ul>
  <li><a href="http://behat.org/">Behat</a>, le framework StoryBDD pour PHP, inspiré de <a href="http://cukes.info/">Cucumber</a>;</li>
  <li><a href="http://www.phpspec.net/">PHPSpec</a>, le framework SpecBDD pour PHP, inspiré de <a href="http://rspec.info/">RSpec</a>;</li>
  <li><a href="http://www.codeception.com">Codeception</a> est un framework de test complet utilisant les principes du BDD.</li>
</ul>

</section>


<section class="chapter" id="complementary_testing_tools">
    <h2 id="complementary_testing_tools_title">Outils de test complémentaire</h2>

<p>Hormis les tests unitaires et les frameworks orientés comportement, il y a aussi un certain nombre de frameworks 
génériques et de bibliothèque utilitaires selon l’approche désirée.</p>

<h3 id="liens-vers-les-outils">Liens vers les outils</h3>

<ul>
  <li><a href="http://seleniumhq.org/">Selenium</a> est un outil d’automatisation d’utilisation d’un navigateur web qui peut être 
<a href="http://phpunit.de/manual/current/en/selenium.html">intégré à PHPUnit</a>.</li>
  <li><a href="https://github.com/padraic/mockery">Mockery</a> est un framework de 
<a href="http://fr.wikipedia.org/wiki/Mock_%28programmation_orient%C3%A9e_objet%29">Mock</a> qui peut être intégré avec 
<a href="http://phpunit.de/">PHPUnit</a> ou <a href="http://www.phpspec.net/">PHPSpec</a>.</li>
  <li><a href="https://github.com/phpspec/prophecy">Prophecy</a> est un framework de Mock très puissant et flexible. Il est intégré à 
<a href="http://www.phpspec.net/">PHPSpec</a> et peut être utilisé avec <a href="http://phpunit.de/">PHPUnit</a>.</li>
</ul>

</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="servers_and_deployment">
    <h1 id="servers_and_deployment_title">Les serveurs et le déploiement</h1>

<p>Les applications PHP peuvent être déployées et exécutées sur les serveurs de production de diverses manières.</p>

</section>


<section class="chapter" id="platform_as_a_service">
    <h2 id="platform_as_a_service_title">Platform as a Service (PaaS)</h2>

<p>Les PaaS fournissent l’architecture système et réseaux nécessaires pour faire tourner une application PHP sur le web. 
Cela signifie qu’il n’y a pratiquement aucune configuration requise pour lancer des applications ou des frameworks PHP.</p>

<p>Les PaaS sont devenues récemment une méthode populaire pour déployer, héberger et monter en puissance (notion de 
‘scalabilité’) des applications PHP de toutes tailles. Vous pouvez trouver une liste de <a href="#fournisseurs_paas_pour_php">fournisseurs de PaaS PHP</a> 
dans la <a href="#ressources">section ressources</a>.</p>

</section>


<section class="chapter" id="virtual_or_dedicated_servers">
    <h2 id="virtual_or_dedicated_servers_title">Serveurs virtuels et dédiés</h2>

<p>Si vous vous sentez à l’aise avec l’administration des systèmes ou êtes intéressé pour en connaître plus sur ce domaine, 
les serveurs virtuels et dédiés vous donne un contrôle absolu sur l’environement de production de votre application.</p>

<h3 id="nginx-et-php-fpm">nginx et PHP-FPM</h3>

<p>PHP via le gestionnaire de processus intégré FastCGI (FPM en anglais) s’accorde très bien avec <a href="http://nginx.org">nginx</a> 
qui est un serveur web léger et hautement performant. Il utilise moins de mémoire qu’Apache et gère mieux les requêtes 
faites en parallèle. Cela est spécialement important pour les serveurs virtuels manquant de mémoire.</p>

<ul>
  <li><a href="http://nginx.org">En savoir plus sur nginx</a></li>
  <li><a href="http://php.net/manual/fr/install.fpm.php">En savoir plus sur PHP-FPM</a></li>
  <li><a href="https://nealpoole.com/blog/2011/04/setting-up-php-fastcgi-and-nginx-dont-trust-the-tutorials-check-your-configuration/">En savoir plus sur la configuration de nginx et PHP-FPM</a></li>
</ul>

<h3 id="apache-et-php">Apache et PHP</h3>

<p>PHP et Apache ont une longue histoire commune. Apache est très largement configurable et un très grand nombre de 
<a href="http://httpd.apache.org/docs/2.4/mod/">modules</a> sont disponibles pour étendre ses fonctionnalités. C’est un choix populaire 
pour les serveurs mutualisés car il est très simple pour des frameworks PHP comme Wordpress de s’installer dessus. 
Malheureusement, Apache utilise plus de ressources que nginx par défaut et ne peut gérer qu’un nombre limité de clients 
à la fois.</p>

<p>Apache possède différentes configurations possibles pour faire tourner PHP. La plus commune et la plus facile est 
d’installer le <a href="http://httpd.apache.org/docs/2.4/mod/prefork.html">prefork MPM</a> avec le module mod_php5. Bien qu’il ne 
soit pas le plus efficace en terme de gestion de la mémoire, il est le plus simple à lancer et utiliser. C’est 
probablement le meilleur choix si vous ne souhaitez pas vous plonger dans les aspects trop techniques de 
l’administration d’un serveur. Notez que si vous utilisez mod_php5, vous DEVEZ utiliser le prefork MPM.</p>

<p>Alternativement, si vous voulez profiter de plus de perfomances et de stabilité avec Apache alors vous pouvez tirer 
avantage à utiliser le même FPM que nginx et faire tourner le <a href="http://httpd.apache.org/docs/2.4/mod/worker.html">worker MPM</a> 
ou l’<a href="http://httpd.apache.org/docs/2.4/mod/event.html">event MPM</a> avec mod_fastcgi ou mod_fcgid. Cette configuration 
sera nettement meilleure en terme d’utilisation mémoire et plus rapide mais cela demandera plus de travail pour la 
mettre en place.</p>

<ul>
  <li><a href="http://httpd.apache.org/">En savoir plus sur Apache</a></li>
  <li><a href="http://httpd.apache.org/docs/2.4/mod/mpm_common.html">En savoir plus sur les modules Multi-Processing</a></li>
  <li><a href="http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html">En savoir plus sur mod_fastcgi</a></li>
  <li><a href="http://httpd.apache.org/mod_fcgid/">En savoir plus sur mod_fcgid</a></li>
</ul>

</section>


<section class="chapter" id="shared_servers">
    <h2 id="shared_servers_title">Hébergement mutualisé</h2>

<p>Grâce à la popularité de PHP, il existe de nombreuses solutions d’hébergements mutualisés. Il est difficile d’ailleurs 
de trouver un hébergeur qui ne propose pas l’installation de PHP mais vérifiez tout de même que ce soit la 
dernière version qui soit installée. Les hébergements mutualisés vous permettent à vous et à d’autres développeurs de 
déployer des sites sur une seule machine. L’avantage est que cela est une solution économique. L’inconvénient est 
que vous ne savez jamais quel genre de grabuge vos “voisins” peuvent faire; ralentir le serveur ou laisser des failles 
de sécurité sont les principaux problèmes. Si votre budget le permet, évitez d’utiliser cette solution.</p>

</section>


<section class="chapter" id="building_your_application">
    <h2 id="building_your_application_title">Constuire et déployer votre application</h2>

<p>Si vous vous retrouvez à faire des changements sur le schéma de la base de données vous-même ou que vous exécutez vos 
tests manuellement avant de mettre à jour vos fichiers (là aussi manuellement), vous devriez sans doute repenser votre 
méthodologie de développement! Avec l’ensemble des étapes manuelles que vous devez réaliser pour déployer une 
nouvelle version de votre application, il y a de fortes chances pour que des erreurs potentiellement fatales viennent 
se glisser durant l’une des étapes. Que ce soit une simple mise à jour, un processus de construction et de déploiement 
voir même une stratégie d’intégration continue, le <a href="http://fr.wikipedia.org/wiki/Moteur_de_production">moteur de production</a> 
 est votre ami.</p>

<p>Parmi les tâches que vous pourriez vouloir automatiser, vous trouverez:</p>

<ul>
  <li>le gestionnaire de dépendances</li>
  <li>la compilation, la minification de vos ressources</li>
  <li>l’exécution des tests</li>
  <li>la création de la documentation</li>
  <li>le “packaging”</li>
  <li>le déploiement</li>
</ul>

<h3 id="outil-de-construction-automatique">Outil de construction automatique</h3>

<p>Les outils de contruction automatique (“build tools” en anglais) peuvent être souvent vus comme un ensemble de scripts 
gérant les tâches les plus répétitives pour le déploiement d’un logiciel. Ils ne font généralement pas parti du logiciel 
en lui-même, agissant ainsi depuis l’extérieur.</p>

<p>Il existe beaucoup d’outils open-source disponibles pour vous aider à automatiser la construction de votre application, 
certains étant même écrits en PHP. Cela ne devrait pas vous empêcher de les utiliser, si jamais ils correspondent mieux 
au travail demandé. Voici quelques exemples:</p>

<p><a href="http://www.phing.info/">Phing</a> est le moyen le plus facile pour commencer à utiliser le déploiement automatisé avec PHP. 
Avec Phing, vous pouvez contrôler les processus de “packaging”, de déploiement et d’exécution de tests à l’aide d’un 
simple fichier XML. Phing (qui est basé sur <a href="http://ant.apache.org/">Apache Ant</a>) fournit un riche ensemble de tâches 
généralement nécessaires pour installer ou mettre à jour une application web et peut être amélioré avec l’ajout de 
tâches personnalisées, écrit en PHP.</p>

<p><a href="https://github.com/capistrano/capistrano/wiki">Capistrano</a> est un système pour les <em>programmeurs de niveau intermédiaire 
à avancé</em> pour exécuter des commandes de façon structuré et répétable sur une ou plusieurs machines distantes. Il est 
pré-configuré pour déployer des applications Ruby On Rails, cependant nombreux sont ceux à l’utiliser pour <em>déployer 
avec succès des applications PHP</em>. La bonne utilisation de Capistrano dépend de vos connaissances en Ruby et Rake.</p>

<p>Le post du blog de Dave Gardner sur le <a href="http://www.davegardner.me.uk/blog/2012/02/13/php-deployment-with-capistrano/">déploiement PHP avec Capistrano</a> 
est un bon point de départ pour les développeurs qui seraient intéressés.</p>

<p><a href="http://www.opscode.com/chef/">Chef</a> est plus qu’un framework de déploiement basé sur Ruby car il peut aussi générer 
l’ensemble de l’environnement de votre serveur ou de votre machine virtuelle.</p>

<p>Les ressources sur Chef pour les développeurs PHP:</p>

<ul>
  <li><a href="http://www.jasongrimes.org/2012/06/managing-lamp-environments-with-chef-vagrant-and-ec2-1-of-3/">Une série en trois parties sur la façon de déployer une application LAMP avec Chef, Vagrant, et EC2</a> (en)</li>
  <li><a href="https://github.com/opscode-cookbooks/php">Un aide-mémoire pour “Chef” sur la façon d’installer et de configurer PHP 5.3 et le gestionnaire de paquet PEAR</a> (en)</li>
</ul>

<p>Allez plus loin:</p>

<ul>
  <li><a href="http://net.tutsplus.com/tutorials/other/automate-your-projects-with-apache-ant/">Automatiser votre projet avec Apache Ant</a> (en)</li>
  <li><a href="http://maven.apache.org/">Maven</a>, un framework de construction automatisée basé sur Ant et <a href="http://www.php-maven.org/">comment l’utiliser avec PHP</a></li>
</ul>

<h3 id="intégration-continue">Intégration continue</h3>

<blockquote>
  <p>L’intégration continue est une pratique en génie logiciel où les membres d’une équipe intègrent leurs travaux 
fréquemment, souvent plusieurs fois par jour. Beaucoup d’équipes trouvent que cette approche permet de réduire de 
façon significative les problèmes d’intégrations et ainsi permet un développement plus cohérent et rapide.</p>
</blockquote>

<p><em>– Martin Fowler</em></p>

<p>Il existe différents moyens pour faire de l’intégration continue en PHP. <a href="https://travis-ci.org/">Travis CI</a> a récemment 
fait un excellent travail pour faire de l’intégration continue une réalité et ce même pour de petits projets. Travis 
CI est un service hébergé d’intégration continue pour la communauté open-source. IL est intégré à Github et offre un 
support de haut niveau pour de nombreux langages (incluant PHP).</p>

<p>Allez plus loin:</p>

<ul>
  <li><a href="http://jenkins-ci.org/">Intégration continue avec Jenkins</a></li>
  <li><a href="http://www.phptesting.org/">Intégration continue avec PHPCI</a></li>
  <li><a href="http://www.jetbrains.com/teamcity/">Intégration continue avec Teamcity</a></li>
</ul>

</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="virtualization">
    <h1 id="virtualization_title">Virtualisation</h1>

<p>Faire tourner vos applications sur différents environnements en développement et en production peut vous amener à 
rencontrer d’étranges bugs lorsque vous passez le code en production. Par ailleurs, il est difficile de maintenir 
différents environnements à jour avec les mêmes versions pour l’ensemble des bibliothèques utilisées lorsque vous 
travaillez en équipe.</p>

<p>Si vous développez sur Windows et que vous déployez votre code sur Linux (ou n’importe quoi qui ne soit pas Windows) 
ou que vous travaillez en équipe, vous devriez penser à utiliser une machine virtuelle (Virtual Machine, abrégé en VM
en anglais).</p>

</section>


<section class="chapter" id="vagrant">
    <h2 id="vagrant_title">Vagrant</h2>

<p><a href="http://vagrantup.com/">Vagrant</a> vous permet de mettre en place une machine
virtuelle en seulement quelques étapes. 
Ces systèmes de base peuvent ensuite être configurés manuellement ou via des outils comme <a href="http://www.puppetlabs.com/">Puppet</a> ou 
<a href="http://www.opscode.com/">Chef</a>. Configurer ces systèmes de façon automatisée est un bon moyen de s’assurer que les différents systèmes 
mis en place seront configurés de la même manière sans avoir à maintenir une liste de commandes pour l’installation. 
Vous pouvez aussi “détruire” votre système et en recréer un nouveau de façon entièrement automatisée, ce qui facilite 
les nouvelles installations.</p>

<p>Vagrant crée des dossiers partagés utilisés pour permettre à l’hôte et à la machine virtuelle d’accéder 
de façon bidirectionnelle à votre code, ce qui signifie que vous pouvez créer et éditer vos fichiers sur le système 
hôte et exécuter votre code sur la machine virtuelle.</p>

<h3 id="un-coup-de-pouce">Un coup de pouce</h3>

<p>Si vous avez besoin d’aide pour commencer à utiliser Vagrant, il existe 3 services qui pourraient vous être utiles :</p>

<ul>
  <li><a href="http://rove.io/">Rove</a>: Un service qui vous autorise à pré-générer des builds Vagrant typiques avec PHP. L’installation se fait 
avec Chef.</li>
  <li><a href="https://puphpet.com/">Puphpet</a>: une interface graphique simple pour mettre en place des machines virtuelles pour développer en PHP.
 <strong>Il se concentre énormement sur PHP</strong>. Par ailleurs, des VMs locales peuvent être utilisées pour déployer des services 
clouds. L’installation se fait avec Puppet.</li>
  <li><a href="http://getprotobox.com/">Protobox</a>: est composé d’une couche au-dessus de Vagrant et d’une interface web pour installer des machines 
virtuelles pour le développement web. Un seul document YAML contrôle tout ce qui peut être installé sur la machine 
virtuelle.</li>
</ul>


</section>


<section class="chapter" id="docker">
    <h2 id="docker_title">Docker</h2>

<p><a href="http://docker.com/">Docker</a> est une alternative légère par rapport à une machine virtuelle. Son nom provient du fait qu’il manipule des “conteneurs”.
Un conteneur est le bloc de base qui dans un cas simple n’accomplit qu’une tâche spécifique, par exemple faire tourner un serveur web.
Une “image” est l’instantané que vous utilisez pour construire un conteneur - Docker en répertorie un grand nombre.</p>

<p>Une application LAMP peut typiquement avoir 3 conteneurs: un pour le serveur web, un pour le processus PHP-FPM et le dernier pour MySQL.
Tout comme les dossiers partagés avec Vagrant, vous pouvez laisser vos fichiers où ils se trouvent et indiquer leurs emplacements à Docker.</p>

<p>Vous pouvez générer des conteneurs depuis la ligne de commande (voir l’exemple ci-dessous) ou, pour des questions de maintenance, créer un fichier <code class="highlighter-rouge">docker-compose.yml</code> qui contiendra l’ensemble des éléments et la façon dont ils communiquent entre eux.</p>

<p>Docker peut vous aider si vous développez plusieurs sites et que vous souhaitez avoir la séparation d’environnement que vous pourriez l’avoir avec une machine virtuelle sans la lourdeur de devoir installer un système d’exploitation complet.
 Non seulement le téléchargement et l’installation d’un conteneur se fait très rapidement mais en plus vous bénéficiez aussi d’un stockage réduit car vous pourrez réutiliser les images communes entre vos différents sites.</p>

<h3 id="exemple-faire-tourner-php-sous-docker">Exemple: Faire tourner PHP sous Docker</h3>

<p>Après avoir <a href="https://docs.docker.com/installation/">installer docker</a> sur votre machine vous pouvez démarrer le serveur web en une commande.
La commande suivante vous permettra de disposer d’une installation Apache complète avec la dernière version de PHP visible sur <code class="highlighter-rouge">http://localhost:8080</code> où la racine du projet pointe vers <code class="highlighter-rouge">/mon/chemin/vers/fichiers_php</code> :</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">docker run -d --name my-php-webserver -p 8080:80 -v /mon/chemin/vers/fichiers_php:/var/www/html/ php:apache</span></code></pre></figure>

<p>Cela va initialiser puis installer votre conteneur. l’option <code class="highlighter-rouge">-d</code> le fait tourner en arrière plan. Pour l’arrêter ou le démarrer, lancer tout simplement <code class="highlighter-rouge">docker stop my-php-webserver</code> ou <code class="highlighter-rouge">docker start my-php-webserver</code> (pas besoin de renseigner les autres paramètres).</p>

<h3 id="en-savoir-plus-sur-docker">En savoir plus sur Docker</h3>

<p>La commande ci-dessus vous montre une façon rapide de mettre en place un serveur web. Il y a encore pleins de choses possibles à faire (et des milliers d’images disponibles sur <a href="https://hub.docker.com/">Docker Hub</a>). Prenez le temps de vous familiariser avec la terminologie et lisez <a href="https://docs.docker.com/userguide/">le manuel utilisateur</a> pour en savoir plus. Gardez cependant à l’esprit de ne jamais faire tourner d’images inconnues et en cas de doute, n’utilisez que les <a href="https://hub.docker.com/explore/">dépôts officiels</a>.</p>

<p>Le site <a href="https://phpdocker.io/generator">PHPDocker.io</a> vous permet d’auto-générer les fichiers nécessaires pour créer une pile LAMP/LEMP en y incluant la version PHP de votre choix ainsi que ses extensions.</p>

<ul>
  <li><a href="http://docker.com/">Site web de Docker</a></li>
  <li><a href="https://docs.docker.com/installation/">Installation de Docker</a></li>
  <li><a href="https://docs.docker.com/userguide/">Manuel d’utilisation de Docker</a></li>
  <li><a href="https://hub.docker.com/">Docker Hub</a></li>
  <li><a href="https://hub.docker.com/explore/">Images officielles du Docker Hub</a></li>
</ul>


</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="caching">
    <h1 id="caching_title">Cache</h1>

<p>Le PHP est plutôt rapide en lui-même mais certains points de congestion peuvent apparaître quand vous établissez des 
connexions distantes, des chargements de fichiers, etc. Heureusement, il y a de nombreux outils disponibles pour 
accélérer certaines parties de vos appplications ou pour réduire le nombre de fois où ces actions consommatrices de temps 
ont besoin de se lancer.</p>

</section>


<section class="chapter" id="bytecode_caching">
    <h2 id="bytecode_caching_title">Cache du bytecode</h2>

<p>Quand un fichier PHP est exécuté, il est d’abord compilé sous forme de bytecode (aussi connu sous le nom d’opcode) 
puis ce bytecode est ensuite exécuté.
Si le fichier PHP n’est pas modifié, le bytecode restera toujours le même ce qui signifie que sa compilation lors de 
chaque appel sera une perte de ressources CPU.</p>

<p>C’est là que le cache du bytecode intervient. Il empêche la compilation récurrente en stockant le bytecode en mémoire 
et en le ré-utilisant à chaque appel successif. Mettre en place le cache ne prend que quelques minutes mais cela<br />
augmentera de façon significative la réactivité de votre application. Il n’y a donc aucune raison de ne pas l’utiliser.</p>

<p>Avec PHP 5.5, il existe un cache intégré pour le bytecode appelé <a href="http://php.net/manual/fr/book.opcache.php">OPcache</a>. 
Il est aussi disponible pour les versions précédentes.</p>

<p>Les autres caches pour bytecode sont:</p>

<ul>
  <li><a href="http://php.net/manual/fr/book.apc.php">APC</a> (PHP 5.4 et antérieur)</li>
  <li><a href="http://xcache.lighttpd.net/">XCache</a></li>
  <li><a href="http://www.zend.com/products/server/">Zend Optimizer+</a> (fait parti de Zend Server)</li>
  <li><a href="http://www.iis.net/download/wincacheforphp">WinCache</a> (extension pour MS Windows Server)</li>
</ul>

</section>


<section class="chapter" id="object_caching">
    <h2 id="object_caching_title">Cache des objets</h2>

<p>Il arrive parfois qu’il soit plus avantageux de mettre en cache des objets individuels dans votre code comme par 
exemple dans les cas où l’on souhaite récupérer le même résultat provenant d’une base de données. Vous pouvez utiliser 
des logiciels de cache objet pour maintenir ces bouts de données en mémoire pour un usage ultérieur. Si vous enregistrez 
ces éléments en mémoire après les avoir récupérés, vous pouvez considérablement gagner en rapidité d’accès; de même 
qu’une réduction de l’utilisation de la base de données.</p>

<p>Beaucoup de solutions de cache du bytecode vous permettent de mettre aussi en cache les données; il y a donc encore 
plus d’avantages à les utiliser. APCu, XCache, et WinCache fournissent tous des APIs pour stocker les données de votre 
code PHP dans leur système de cache mémoire.</p>

<p>Les systèmes de cache objet les plus courants sont APCu and memcached. APCu est un excellent choix en ce qui concerne 
le cache objet. Il inclut une API simple pour ajouter vos propres données dans son cache et est très facile à 
configurer. La seule vraie limitation d’APCu est qu’il est lié au serveur où il est installé. Memcached, d’un autre 
côté, s’installe de façon séparé en tant que service et peut être accédé depuis le réseau ce qui signifie que vous 
pouvez stocker les objets dans un unique endroit même s’ils proviennent de systèmes différents.</p>

<p>Notez que lorsque PHP s’exécute en tant qu’application (Fast)-CGI au sein de votre serveur, les processus PHP auront 
leur propre cache, c’est-à-dire que les données d’APCu ne seront pas partagées entre les différents processus. Dans ce 
cas, vous pourriez envisager d’utiliser memcached étant donné qu’il n’est pas lié aux processus PHP.</p>

<p>Dans une configuration réseau, APCu va généralement surpasser memcached en terme de rapidité d’accès mais memcached sera 
capable d’être “scalable” plus rapidement et de façon plus poussée. Si vous ne vous attendez pas à avoir plusieurs serveurs 
pour gérer votre application, ou si vous ne souhaitez pas utiliser les fonctionnalités spécifiques de memcached alors 
APCu est probablement votre meilleur choix pour le cache d’objets.</p>

<p>Exemple utilisant APCu:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// vérifie si la variable 'expensive_data' existe dans le cache
</span><span class="nv">$data</span> <span class="o">=</span> <span class="nb">apc_fetch</span><span class="p">(</span><span class="s1">'expensive_data'</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$data</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// la donnée n'est pas en cache; enregistrer le résultat de l'appel d'une fonction longue pour plus tard
</span>    <span class="nb">apc_add</span><span class="p">(</span><span class="s1">'expensive_data'</span><span class="p">,</span> <span class="nv">$data</span> <span class="o">=</span> <span class="nx">get_expensive_data</span><span class="p">());</span>
<span class="p">}</span>

<span class="nb">print_r</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span></code></pre></figure>

<p>Remarque: Avant PHP 5.5, l’APC fournit à la fois un cache d’objet et un cache pour le bytecode. l’APCu est un projet 
visant à apporter le cache d’objet à PHP 5.5+ depuis que PHP a un cache de bytecode intégré (OPcache).</p>

<p>En savoir plus sur les systèmes de cache objets les plus connus:</p>

<ul>
  <li><a href="https://github.com/krakjoe/apcu">APCu</a></li>
  <li><a href="http://php.net/manual/fr/ref.apc.php">Fonctions APC</a></li>
  <li><a href="http://memcached.org/">Memcached</a></li>
  <li><a href="http://redis.io/">Redis</a></li>
  <li><a href="http://xcache.lighttpd.net/wiki/XcacheApi">APIs XCache</a></li>
  <li><a href="http://www.php.net/manual/fr/ref.wincache.php">Fonctions WinCache</a></li>
</ul>

</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="documenting">
    <h1 id="documenting_title">Documentation du code</h1>

</section>


<section class="chapter" id="phpdoc">
    <h2 id="phpdoc_title">PHPDoc</h2>

<p>PHPDoc est un standard informel pour commenter du code PHP. Il existe un <em>grand</em> nombre de
<a href="http://www.phpdoc.org/docs/latest/references/phpdoc/tags/index.html">tags</a> disponibles. La liste complète des tags et
des exemples pour être trouvé sur le <a href="http://www.phpdoc.org/docs/latest/index.html">manuel PHPDoc</a>.</p>

<p>Vous trouverez ci-dessous un exemple d’utilisation des principaux tags;</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="sd">/**
 * @author Votre nom &lt;nom@exemple.com&gt;
 * @link http://www.phpdoc.org/docs/latest/index.html
 * @package helper
 */</span>
<span class="k">class</span> <span class="nc">DateTimeHelper</span>
<span class="p">{</span>
    <span class="sd">/**
     * @param mixed $anything Tout ce qui peut être traduit en un objet \DateTime
     *
     * @return \DateTime
     * @throws \InvalidArgumentException
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">dateTimeFromAnything</span><span class="p">(</span><span class="nv">$anything</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$type</span> <span class="o">=</span> <span class="nb">gettype</span><span class="p">(</span><span class="nv">$anything</span><span class="p">);</span>

        <span class="k">switch</span> <span class="p">(</span><span class="nv">$type</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Ce bloc doit retourner un objet \DateTime
</span>        <span class="p">}</span>

        <span class="k">throw</span> <span class="k">new</span> <span class="nx">\InvalidArgumentException</span><span class="p">(</span>
            <span class="s2">"Impossible de convertir '</span><span class="si">{</span><span class="nv">$type</span><span class="si">}</span><span class="s2">' en un objet DateTime"</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**
     * @param mixed $date Tout ce qui peut être traduit en un objet \DateTime
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">printISO8601Date</span><span class="p">(</span><span class="nv">$date</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dateTimeFromAnything</span><span class="p">(</span><span class="nv">$date</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">'c'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**
     * @param mixed $date Tout ce qui peut être traduit en un objet \DateTime
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">printRFC2822Date</span><span class="p">(</span><span class="nv">$date</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dateTimeFromAnything</span><span class="p">(</span><span class="nv">$date</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">'r'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>La documentation d’une classe commence en premier lieu par l’introduction du nom de l’auteur avec le tag
<a href="http://www.phpdoc.org/docs/latest/references/phpdoc/tags/author.html">@author</a> qui peut être répété s’il y a plusieurs auteurs.
En deuxième lieu, nous pouvons indiquer un lien vers un site web si jamais il existe une relation entre ce dernier et le code via
le tag <a href="http://www.phpdoc.org/docs/latest/references/phpdoc/tags/link.html">@link</a>. Enfin, si jamais la classe fait parti
d’un espace de noms, il faut l’indiquer avec le tag <a href="http://www.phpdoc.org/docs/latest/references/phpdoc/tags/package.html">@package</a>.</p>

<p>À l’intérieur de cette classe, la première méthode a un paramètre indiqué par <a href="http://www.phpdoc.org/docs/latest/references/phpdoc/tags/param.html">@param</a>
qui nous renseigne sur son type, son nom et une brève description. Si jamais une méthode renvoit un résultat, il faut
l’indiquer avec le tag <a href="http://www.phpdoc.org/docs/latest/references/phpdoc/tags/return.html">@return</a> et utilisez
<a href="http://www.phpdoc.org/docs/latest/references/phpdoc/tags/throws.html">@throws</a> autant de fois qu’il y a d’exceptions levées.</p>

<p>La seconde et la troisième méthodes sont très similaires et on un unique tag <a href="http://www.phpdoc.org/docs/latest/references/phpdoc/tags/param.html">@param</a>
comme la première méthode. La seule différence notable se trouvant dans la doc. est la présence d’un tag
<a href="http://www.phpdoc.org/docs/latest/references/phpdoc/tags/return.html">@return</a> sur la seconde méthode. La valeur
<code class="highlighter-rouge">void</code> pour le tag <a href="http://www.phpdoc.org/docs/latest/references/phpdoc/tags/return.html">@return</a> nous informe explicitement que la
méthode ne renvoit rien (si vous omettez ce tag, c’est cette valeur qui sera indiqué par défaut).</p>

<p>N.d.T.: À noter que <code class="highlighter-rouge">void</code> n’est pas un type valide pour PHP, c’est pourquoi je préconise de mettre plutôt la valeur
<code class="highlighter-rouge">null</code> qui est celle retournée par défaut quand la fonction ne contient pas d’instruction <code class="highlighter-rouge">return</code>.</p>

</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="resources">
    <h1 id="resources_title">Ressources</h1>

<h2 id="officielles">Officielles</h2>

<ul>
  <li><a href="http://php.net/">Site web PHP</a></li>
  <li><a href="http://php.net/docs.php">Documentation PHP</a></li>
</ul>

<h2 id="personnes-à-suivre">Personnes à suivre</h2>

<ul>
  <li><a href="http://twitter.com/rasmus">Rasmus Lerdorf</a></li>
  <li><a href="http://twitter.com/fabpot">Fabien Potencier</a></li>
  <li><a href="http://twitter.com/derickr">Derick Rethans</a></li>
  <li><a href="http://twitter.com/shiflett">Chris Shiflett</a></li>
  <li><a href="http://twitter.com/s_bergmann">Sebastian Bergmann</a></li>
  <li><a href="http://twitter.com/mwop">Matthew Weier O’Phinney</a></li>
  <li><a href="http://twitter.com/padraicb">Pádraic Brady</a></li>
  <li><a href="http://twitter.com/ircmaxell">Anthony Ferrara</a></li>
  <li><a href="http://twitter.com/nikita_ppv">Nikita Popov</a></li>
</ul>

<h2 id="mentorat">Mentorat</h2>

<ul>
  <li><a href="http://php-mentoring.org/">phpmentoring.org</a> - Encadrement et montée en compétences par des membres de la communauté</li>
</ul>

<h2 id="fournisseurs-paas-pour-php">Fournisseurs PaaS pour PHP</h2>

<ul>
  <li><a href="https://pagodabox.com/">PagodaBox</a></li>
  <li><a href="https://appfog.com/">AppFog</a></li>
  <li><a href="https://heroku.com">Heroku</a>
(Le support pour PHP n’est pas documenté mais est basé sur le partenariat<br />
avec Facebook : <a href="http://net.tutsplus.com/tutorials/php/quick-tip-deploy-php-to-heroku-in-seconds/">lien</a>)</li>
  <li><a href="http://fortrabbit.com/">fortrabbit</a></li>
  <li><a href="https://www.engineyard.com/products/cloud">Engine Yard Cloud</a></li>
  <li><a href="http://openshift.com">Red Hat OpenShift Platform</a></li>
  <li><a href="http://docs.dotcloud.com/services/php/">dotCloud</a></li>
  <li><a href="http://aws.amazon.com/elasticbeanstalk/">AWS Elastic Beanstalk</a></li>
  <li><a href="https://www.cloudcontrol.com/">cloudControl</a></li>
  <li><a href="http://www.windowsazure.com/">Windows Azure</a></li>
  <li><a href="http://www.phpcloud.com/develop">Zend Developer Cloud</a></li>
  <li><a href="https://developers.google.com/appengine/docs/php/gettingstarted/">Google App Engine</a></li>
  <li><a href="http://jelastic.com/">Jelastic</a></li>
</ul>

</section>


<section class="chapter" id="frameworks">
    <h2 id="frameworks_title">Frameworks</h2>

<p>Plutôt que de ré-inventer la roue, beaucoup de développeurs PHP utilisent des frameworks pour construire leur application 
web. Les frameworks permettent de s’abstraire des préoccupations de bas niveau et fournissent de précieuses interfaces 
pour remplir les tâches les plus communes.</p>

<p>Vous n’avez pas besoin d’utiliser un framework pour chacun de vos projets. Parfois, du PHP brut est le meilleur choix 
mais si vous avez besoin d’un framework alors il en existe de 3 sortes :</p>

<ul>
  <li>Les micro-frameworks</li>
  <li>Les frameworks complets (“full-stack” en anglais)</li>
  <li>Les frameworks orienté composant</li>
</ul>

<p>Les micro-frameworks sont essentiellement des surcouches pour router une requête HTTP vers une fonction de rappel 
(callback en anglais), une méthode, etc de façon aussi rapide que possible et parfois sont accompagnés de quelques 
bibliothèques supplémentaires pour vous assister dans le développmeent tel qu’une surcouche pour la gestion d’une 
base de données, etc. Ils sont principalement utilisés pour construire des services HTTP distants.</p>

<p>Beaucoup de frameworks ajoutent un nombre considérable de fonctionnalités au-dessus de ce qui est disponible dans un 
micro-framework et ceci sont appelés “framework full-stack”. Ils sont souvent fourni avec des ORMs, des packages 
d’authentification, etc.</p>

<p>Les frameworks orienté composant sont des collections de bibliothèques spécialisées. Plusieurs de ces frameworks 
peuvent être utilisés ensemble pour former un micro ou un framework complet.</p>

<ul>
  <li><a href="https://github.com/codeguy/php-the-right-way/wiki/Frameworks">Frameworks PHP populaires</a></li>
</ul>

</section>


<section class="chapter" id="components">
    <h2 id="components_title">Composants</h2>

<p>Comme mentionné au dessus, les “composants” sont une autre approche pour atteindre l’objectif de créer, distribuer et 
implémenter du code partagé. Différents dépôts de composants existent, les 2 plus connus sont :</p>

<ul>
  <li><a href="#composer_et_packagist">Packagist</a></li>
  <li><a href="#pear">PEAR</a></li>
</ul>

<p>Chacun de ces 2 dépôts possède des outils en ligne de commande qui lui sont associés afin d’installer et de mettre à 
jour les processus, ce qui est expliqué plus en détail dans la section <a href="#la_gestion_des_dépendances">gestion des dépendances</a>.</p>

<p>Il existe aussi des frameworks basés sur les composants qui vous permettent d’utiliser leurs composants avec (ou sans) 
conditions requises. Par exemple, vous pouvez utiliser le package pour la <a href="https://github.com/fuelphp/validation">validation de FuelPHP</a> sans 
l’obligation d’utiliser le framework tout entier. Ces projets sont essentiellement juste d’autres répertoires pour 
la réutilisation de composants :</p>

<ul>
  <li><a href="http://auraphp.github.com/">Aura</a></li>
  <li><a href="https://github.com/fuelphp">FuelPHP (2.0 seulement)</a></li>
  <li><a href="https://github.com/illuminate">“Illuminate Components” de Laravel</a></li>
  <li><a href="http://symfony.com/fr/doc/current/components/index.html">Composants Symfony</a></li>
</ul>

</section>


<section class="chapter" id="books">
    <h2 id="books_title">Livres</h2>

<p>Il existe un grand nombre de livres autour du PHP mais un certain nombre sont malheureusement obsolètes et ne 
contiennent plus d’informations à jour. Il existe même des livres publiés pour “PHP 6” qui n’a pas encore vu le jour 
(et qui ne le verra probablement jamais à cause de ces livres).</p>

<p>Cette section se veut être un recueil vivant de l’ensemble des livres recommandés sur le développement PHP en général. 
Si vous souhaitez ajouter un livre, envoyez une “pull request” (sur github) et votre avis sera relu et ajouté ici si 
cela est pertinent.</p>

<h3 id="livres-gratuits">Livres gratuits</h3>

<ul>
  <li><a href="https://leanpub.com/phptherightway/">PHP The Right Way</a>(en) - Ce site est aussi disponible au format ebook.</li>
</ul>

<h3 id="livres-payants">Livres payants</h3>

<ul>
  <li><a href="https://leanpub.com/mlaphp">Modernizing Legacy Applications In PHP</a>(en) - Gardez le contrôle de votre code PHP ancien via 
un ensemble d’étapes à appliquer pas à pas</li>
  <li><a href="https://leanpub.com/buildingsecurephpapps">Building Secure PHP Apps</a>(en) - Pour apprendre les bases en matière de sécurité 
qu’un développeur expérimenté acquiert au fil des années, le tout condensé dans un livre facile à lire</li>
  <li><a href="https://leanpub.com/grumpy-testing">The Grumpy Programmer’s Guide To Building Testable PHP Applications</a>(en) - Apprendre à écrire du code testable n’est pas forcément ennuyant</li>
  <li><a href="https://leanpub.com/securingphp-coreconcepts">Securing PHP: Core Concepts</a>(en) - Un guide sur les failles de sécurité les plus courantes</li>
  <li><a href="https://leanpub.com/scalingphp">Scaling PHP</a>(en) - Ne jouez plus les sysadmins et retournez à votre code</li>
  <li><a href="https://leanpub.com/signalingphp">Signaling PHP</a>(en) - Les signaux PCNLT sont d’une grande aide lorsqu’il s’agit d’écrire des scripts PHP en ligne de commande.</li>
</ul>

</section>

<div class="back-to-top"><p><a href="#top" class="top">Retour en haut</a></p>
</div>
<section class="chapter" id="community">
    <h1 id="ccommunity_title">Communauté</h1>

<p>La communauté PHP est aussi diverse que large et de nombreux membres sont prêts à porter secours aux nouveaux. 
N’hésitez pas à rejoindre un PHP User Group (PUG) ou à assister à des conférences sur PHP afin d’en apprendre plus sur 
les meilleures pratiques. Vous pouvez aussi aller sur IRC, canal #phpc du serveur Freenode (<a href="http://webchat.freenode.net/?channels=phpc">irc.freenode.com</a>) 
et suivre le compte twitter <a href="https://twitter.com/phpc">@phpc</a>. Sortez, rencontrez d’autres développeurs PHP, apprenez de nouveaux 
sujets et par dessus tout, faites vous des amis ! Ils existent d’autres ressources en ligne comme la page 
<a href="https://plus.google.com/u/0/communities/104245651975268426012">Google+ PHP</a> et <a href="http://stackoverflow.com/questions/tagged/php">StackOverflow</a>.</p>

<p><a href="http://www.php.net/cal.php">Voir le calendrier officiel des évènements PHP</a></p>

<h2 id="php-user-groups">PHP User Groups</h2>

<p>Si vous vivez dans une grande ville, il y a de fortes chances pour qu’un groupe d’utilisateurs PHP existe. Bien qu’il 
n’y ait pas de listes officielles, vous pouvez facilement trouver un groupe proche de chez vous en allant sur 
<a href="https://www.google.com/search?q=php+user+group+proche+de+chez+moi">Google</a>, <a href="http://www.meetup.com/find/">Meetup.com</a> ou <a href="http://php.ug">PHP.ug</a>. Si vous vivez dans une ville plus petite, il se peut qu’il 
n’existe rien encore alors si vous avez suffisamment de motivation, créez-en une !</p>

<p><a href="https://wiki.php.net/usergroups">Lire plus sur les PUGs dans le wiki PHP</a></p>

<h2 id="conférences-php">Conférences PHP</h2>

<p>Des conférences PHP ont lieu dans beaucoup de pays de part le monde. Vous y trouverez des membres connus 
de la communauté PHP, c’est donc une excellente opportunité de rencontrer les leaders de l’industrie.</p>

<p><a href="http://php.net/conferences/index.php">Trouver des conférences PHP</a></p>


</section>



        </div>

        <footer class="site-footer" id="credits">
            <h2>Créé et maintenu par</h2>
            <ul>
                <li><a href="http://joshlockhart.com" target="_blank">Josh Lockhart</a></li>
                <li><a href="http://philsturgeon.co.uk/" target="_blank">Phil Sturgeon</a></li>
                <li><a href="https://github.com/codeguy/php-the-right-way/graphs/contributors" target="_blank">Collaborateurs au projet</a></li>
            </ul>
            <div class="license">
                <a class="cc-badge" rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"></a>
                <br />
                <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">PHP: The Right Way</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://joshlockhart.com" property="cc:attributionName" rel="cc:attributionURL">Josh Lockhart</a>
                <br/>
                is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="http://www.phptherightway.com" rel="dct:source">www.phptherightway.com</a>.
            </div>
        </footer>
    </body>
</html>
